import{q as S,r as U,w as z,c as L,a as l,W as e,U as n,O as o,al as O,o as E,T as c,u as a,M as A,R as F,$ as H}from"./@vue-BedgDXZT.js";import{a as k}from"./axios-D8rVyQy1.js";import{I as _}from"./@iconify-BzSLy_Lz.js";import{_ as K}from"./lodash-G2ORfQRs.js";import{u as Q}from"./vue-i18n-3uPOuKlG.js";import{_ as R}from"./SkeletonTable-CkoHEoRM.js";import{u as W}from"./@tanstack-D5MgbqGz.js";import{u as G}from"./app-ChQKHz3m.js";import{i as J,f as X,j as Y,w as Z,x as ee,o as te,k as oe,y as ae,q as se,r as ne,a as le,b as re,c as ie,A as me,B as ce,p as w}from"./element-plus-B3W2dA5h.js";import"./@intlify-ChVUvfmF.js";import"./pinia-BVe78Fnf.js";import"./vue-router-CFFWa3Rv.js";import"./js-cookie-Cz0CWeBA.js";import"./@casl-Dl6lt6vV.js";import"./@ucast-BiZkLRnB.js";import"./@vueuse-_BfsD77n.js";import"./chart.js-B8s4pPcf.js";import"./vue-advanced-cropper-C5NvVQmq.js";import"./dayjs-BmnIqbSg.js";import"./vue3-blocks-tree-BkKvaGx5.js";import"./vue-BcxTvRm9.js";import"./@unhead-BU3UxbPv.js";import"./unhead-M3i9Ttrl.js";import"./hookable-B8xFkYCm.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-DHhqOHwO.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";const de={class:"content"},pe={class:"content-header"},ue={class:"content-title"},_e={class:"md:flex hidden items-center gap-2.5 text-sm font-semibold"},fe={class:"flex justify-between items-center p-4"},ge={class:"flex items-center gap-2"},be={class:"flex justify-between items-center p-4"},we={class:"flex items-center gap-2"},he={class:"flex items-center gap-2"},et={__name:"Index",setup(ve){const{t:r}=Q(),{setTitle:B}=G();S(()=>{B(r("base.user",2))});const i=U({page:1,limit:25,q:""});z(()=>i.value.q,K.debounce(()=>{i.value.page=1,g()},1e3));const h=async({queryKey:t})=>{const[m,p]=t;return(await k.get("/settings/user",{params:p})).data},{data:d,isLoading:f,isError:ye,error:$e,refetch:g}=W({queryKey:["userList",i.value],queryFn:h,keepPreviousData:!0}),C=t=>{i.value.page=t,g()},V=t=>{ce.confirm(r("message.delete_confirm"),r("message.delete_confirm_title"),{confirmButtonText:r("common.ok"),cancelButtonText:r("common.cancel"),type:"warning"}).then(()=>{k.delete(`/settings/user/${t}/delete`).then(()=>{h(),w({type:"success",message:r("message.delete_success")})}).catch(m=>{w({type:"error",message:r("message.delete_cancel")})})}).catch(()=>{w({type:"info",message:r("message.delete_cancel")})})};return(t,m)=>{const p=Y,v=J,b=ee,q=Z,x=te,y=oe,u=ne,D=O("router-link"),$=ie,I=re,T=le,j=se,M=me,N=ae,P=X;return E(),L("div",de,[l("div",pe,[l("h2",ue,n(t.$t("base.user",2)),1),l("div",_e,[e(v,{separator:"/"},{default:o(()=>[e(p,{to:{path:"/"}},{default:o(()=>[c(n(t.$t("base.dashboard")),1)]),_:1}),e(p,{to:{path:"/settings"}},{default:o(()=>[c(n(t.$t("base.setting",2)),1)]),_:1}),e(p,null,{default:o(()=>[c(n(t.$t("base.user",2)),1)]),_:1})]),_:1})])]),e(P,{"body-class":"!p-0",class:"!rounded-lg !shadow-md"},{default:o(()=>[l("div",fe,[e(q,{modelValue:i.value.limit,"onUpdate:modelValue":m[0]||(m[0]=s=>i.value.limit=s),placeholder:t.$t("common.select"),disabled:a(f),class:"w-20",onChange:m[1]||(m[1]=s=>a(g)())},{default:o(()=>[e(b,{label:"25",value:"25"}),e(b,{label:"50",value:"50"}),e(b,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","disabled"]),l("div",ge,[e(x,{modelValue:i.value.q,"onUpdate:modelValue":m[2]||(m[2]=s=>i.value.q=s),clearable:""},{prefix:o(()=>[e(a(_),{icon:"mingcute:search-line"})]),_:1},8,["modelValue"]),e(y,{tag:"router-link",type:"primary",to:"/settings/user/create",disabled:a(f)},{default:o(()=>[e(a(_),{icon:"mingcute:add-line",class:"me-2"}),c(" "+n(t.$t("common.create")),1)]),_:1},8,["disabled"])])]),e(N,{loading:a(f),animated:""},{template:o(()=>[e(R)]),default:o(()=>[e(j,{class:"min-w-full",data:a(d).data},{default:o(()=>[e(u,{prop:"name",label:t.$t("common.name")},null,8,["label"]),e(u,{prop:"email",label:t.$t("common.email")},null,8,["label"]),e(u,{label:t.$t("base.role")},{default:o(s=>[c(n(s.row.roles.length?s.row.roles[0].name:"-"),1)]),_:1},8,["label"]),e(u,{label:t.$t("common.action"),align:"center",width:"110"},{default:o(s=>[e(T,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:o(()=>[e(I,null,{default:o(()=>[e($,{class:"flex justify-between"},{default:o(()=>[e(D,{to:`/settings/user/${s.row.id}/edit`,class:"flex justify-between"},{default:o(()=>[e(a(_),{icon:"mingcute:edit-line",class:"me-2"}),c(" "+n(t.$t("common.edit")),1)]),_:2},1032,["to"])]),_:2},1024),s.row.id!=1?(E(),A($,{key:0,class:"flex justify-between",onClick:H(Ee=>V(s.row.id),["prevent"])},{default:o(()=>[e(a(_),{icon:"mingcute:delete-2-line",class:"me-2"}),c(" "+n(t.$t("common.delete")),1)]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]),default:o(()=>[e(y,{type:"primary"},{default:o(()=>[c(n(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),l("div",be,[l("div",we,[l("span",null,n(t.$t("common.table_paginate",{from:a(d).from,to:a(d).to,total:a(d).total})),1)]),l("div",he,[e(M,{class:"float-end",background:"",layout:"prev, pager, next","page-size":a(d).per_page,total:a(d).total,"current-page":a(d).current_page,onCurrentChange:C},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])}}};export{et as default};
