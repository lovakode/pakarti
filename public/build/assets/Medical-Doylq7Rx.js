import{r as f,c as ee,o as z,a as C,V as e,X as m,T as l,aa as d,u as p,W as V,R as oe,ak as te,f as Ye,S as Ce,P as De}from"./@vue-R74GAGRy.js";import{a as E}from"./axios-D8rVyQy1.js";import{I as T}from"./@iconify-B_FrOzP8.js";import{_ as ne}from"./lodash-BJPsjdUP.js";import{u as ue}from"./vue-i18n-ZNZ64Gzf.js";import{_ as se}from"./SkeletonTable-BlkTH-8E.js";import{u as re}from"./@tanstack-CrM5e4XN.js";import{b as me}from"./app-DkR6lKKd.js";import{k as ae,q as de,r as ie,a as ce,b as pe,c as fe,u as _e,m as ve,n as ye,o as be,g as ge,h as $e,C as qe,s as Se,t as Fe,l as we,z as ke,p as y,D as Ve}from"./element-plus-m-0apcFn.js";const Ue={class:"font-semibold my-auto"},Ee={class:"text-end"},ml={__name:"Family",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F}=me(),{t:c}=ue(),n=f({q:"",employeeId:D.employee}),j=async({queryKey:u})=>{const[o,t]=u;return(await E.get("/family",{params:t})).data},{data:R,isLoading:U,isError:B,error:le,refetch:L}=re({queryKey:["showEmployeeFamilies",n.value],queryFn:j,keepPreviousData:!0});ne.debounce(()=>{n.value.page=1,L()},2e3);const Y=()=>{L()},P=f(null),w=f(!1),b=f(""),r=f({id:null,name:null,employee_id:D.employee,birth_date:null,birth_place:null,relationship:null,phone:null,religion:null}),a=f({name:[{required:!0,message:c("validation.required",{attribute:c("common.name")}),trigger:"blur"}]}),O=f(!1),I=()=>{b.value=`${c("common.add")} ${c("employee.family")}`,w.value=!0,r.value.id=null,r.value.name=null,r.value.birth_date=null,r.value.birth_place=null,r.value.relationship=null,r.value.religion=null,r.value.phone=null},X=u=>{b.value=`${c("common.edit")} ${c("employee.family")}`,w.value=!0,r.value.id=u.id,r.value.name=u.name,r.value.birth_date=u.birth_date,r.value.birth_place=u.birth_place,r.value.relationship=u.relationship,r.value.religion=u.religion,r.value.phone=u.phone},Q=()=>{w.value=!1,r.value.id=null,r.value.name=null,r.value.name=null,r.value.birth_date=null,r.value.birth_place=null,r.value.relationship=null,r.value.religion=null,r.value.phone=null},N=async()=>{P.value&&P.value.validate(async u=>{if(u){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{O.value=!0;const t=r.value.id?`/family/${r.value.id}/update`:"/family/store";await E({method:"post",url:t,data:r.value}),w.value=!1,L(),Q(),y({message:c("message.success_save"),type:"success"})}catch{O.value=!1,y({message:c("message.error_server"),type:"error"})}o.close()}else y({message:c("message.error_input"),type:"error"})})},G=u=>{ke.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{E.delete(`/family/${u}/delete`).then(()=>{L(),y({type:"success",message:c("message.delete_success")})}).catch(o=>{y({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:c("message.delete_cancel")})})};return(u,o)=>{const t=ae,i=ie,_=fe,K=pe,H=ce,J=de,Z=_e,A=be,q=ye,g=qe,$=$e,k=Fe,W=Se,v=ge,x=ve,s=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Ue,m(u.$t("employee.family_member",2)),1),e(t,{type:"primary",disabled:p(U),onClick:V(I,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${u.$t("common.add")} ${u.$t("employee.family_member")}`),1)]),_:1},8,["disabled"])],2),e(Z,{loading:p(U),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(R)?{name:"default",fn:l(()=>[e(J,{class:"min-w-full",data:p(R),onSortChange:Y},{default:l(()=>[e(i,{label:u.$t("common.name"),sortable:""},{default:l(h=>[d(m(h.row.name??"-"),1),o[7]||(o[7]=C("br",null,null,-1)),d(" "+m(h.row.relationship??"-"),1)]),_:1},8,["label"]),e(i,{label:u.$t("employee.birth_date"),sortable:""},{default:l(h=>[d(m(h.row.birth_place??"-"),1),o[8]||(o[8]=C("br",null,null,-1)),d(" "+m(h.row.birth_date?p(F)(h.row.birth_date):"-"),1)]),_:1},8,["label"]),e(i,{label:u.$t("employee.religion"),sortable:""},{default:l(h=>[d(m(h.row.religion?u.$t(`employee.${h.row.religion}`):"-"),1),o[9]||(o[9]=C("br",null,null,-1))]),_:1},8,["label"]),e(i,{prop:"phone",label:u.$t("common.phone"),sortable:""},null,8,["label"]),e(i,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(h=>[e(H,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(K,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:V(S=>X(h.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:V(S=>G(h.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(t,{type:"primary"},{default:l(()=>[d(m(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(s,{id:"modalForm",modelValue:w.value,"onUpdate:modelValue":o[6]||(o[6]=h=>w.value=h),title:b.value,class:"!sm:w-full !w-1/3 rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(x,{"label-position":"top",ref_key:"formRef",ref:P,model:r.value,rules:a.value,onSubmit:V(N,["prevent"])},{default:l(()=>[e(q,{label:u.$t("common.name"),prop:"name"},{default:l(()=>[e(A,{modelValue:r.value.name,"onUpdate:modelValue":o[0]||(o[0]=h=>r.value.name=h)},null,8,["modelValue"])]),_:1},8,["label"]),e(v,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.birth_date")},{default:l(()=>[e(g,{modelValue:r.value.birth_date,"onUpdate:modelValue":o[1]||(o[1]=h=>r.value.birth_date=h),format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.birth_place")},{default:l(()=>[e(A,{modelValue:r.value.birth_place,"onUpdate:modelValue":o[2]||(o[2]=h=>r.value.birth_place=h)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.relationship"),prop:"relationship"},{default:l(()=>[e(W,{modelValue:r.value.relationship,"onUpdate:modelValue":o[3]||(o[3]=h=>r.value.relationship=h),class:"w-full",placeholder:u.$t("common.select")},{default:l(()=>[e(k,{value:"wife",label:u.$t("employee.wife")},null,8,["label"]),e(k,{value:"husband",label:u.$t("employee.husband")},null,8,["label"]),e(k,{value:"mother",label:u.$t("employee.mother")},null,8,["label"]),e(k,{value:"father",label:u.$t("employee.father")},null,8,["label"]),e(k,{value:"child",label:u.$t("employee.child")},null,8,["label"]),e(k,{value:"sibling",label:u.$t("employee.sibling")},null,8,["label"]),e(k,{value:"relative",label:u.$t("employee.relative")},null,8,["label"]),e(k,{value:"friend",label:u.$t("employee.friend")},null,8,["label"]),e(k,{value:"colleague",label:u.$t("employee.colleague")},null,8,["label"]),e(k,{value:"other",label:u.$t("employee.other")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.religion")},{default:l(()=>[e(W,{modelValue:r.value.religion,"onUpdate:modelValue":o[4]||(o[4]=h=>r.value.religion=h),class:"w-full",placeholder:u.$t("common.select")},{default:l(()=>[e(k,{value:"islam",label:u.$t("employee.islam")},null,8,["label"]),e(k,{value:"protestant",label:u.$t("employee.protestant")},null,8,["label"]),e(k,{value:"catholic",label:u.$t("employee.catholic")},null,8,["label"]),e(k,{value:"hindu",label:u.$t("employee.hindu")},null,8,["label"]),e(k,{value:"buddha",label:u.$t("employee.buddha")},null,8,["label"]),e(k,{value:"confucian",label:u.$t("employee.confucian")},null,8,["label"]),e(k,{value:"other",label:u.$t("common.other")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(q,{label:u.$t("common.phone")},{default:l(()=>[e(A,{modelValue:r.value.phone,"onUpdate:modelValue":o[5]||(o[5]=h=>r.value.phone=h)},null,8,["modelValue"])]),_:1},8,["label"]),C("div",Ee,[e(t,{onClick:V(Q,["prevent"])},{default:l(()=>[d(m(u.$t("common.cancel")),1)]),_:1}),e(t,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Te={class:"max-w-full w-full flex items-center"},je={key:0},Re={key:1,class:"truncate"},he={__name:"InputFile",props:{modelValue:{type:[File,String],default:null}},emits:["update:modelValue"],setup(M,{emit:D}){const F=M,c=D,n=Ye(()=>F.modelValue!==null&&F.modelValue!==void 0&&F.modelValue!==""),j=Ye(()=>F.modelValue instanceof File?F.modelValue.name:typeof F.modelValue=="string"?F.modelValue.split("/").pop()||F.modelValue:""),R=B=>{const le=B.target.files[0];le&&c("update:modelValue",le)},U=()=>{c("update:modelValue",null)};return(B,le)=>{const L=ae;return z(),ee("div",Te,[C("label",{class:oe(["el-button flex items-center justify-center transition-all duration-300",n.value?"w-3/4":"w-full"])},[M.modelValue?(z(),ee("span",Re,m(j.value),1)):(z(),ee("span",je,m(B.$t("common.choose_file")),1)),C("input",{type:"file",class:"!hidden",onChange:R},null,32)],2),n.value?(z(),Ce(L,{key:0,onClick:U,type:"danger",class:"w-1/5"},{default:l(()=>le[0]||(le[0]=[C("i",{class:"el-icon"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[C("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),C("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})])],-1)])),_:1})):De("",!0)])}}},Be={class:"font-semibold my-auto"},Le={key:1},Pe={class:"text-end"},dl={__name:"Education",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F,objectToFormData:c}=me(),{t:n}=ue(),j=f({q:"",employeeId:D.employee}),R=async({queryKey:o})=>{const[t,i]=o;return(await E.get("/education",{params:i})).data},{data:U,isLoading:B,isError:le,error:L,refetch:Y}=re({queryKey:[`showEmployeeEducation-${D.employee}`,j.value],queryFn:R,keepPreviousData:!0});ne.debounce(()=>{j.value.page=1,Y()},2e3);const P=()=>{Y()},w=f(null),b=f(!1),r=f(""),a=f({id:null,name:null,employee_id:D.employee,institution:null,degree:null,field_of_study:null,grade:null,graduation_date:null,file:null}),O=f({name:[{required:!0,message:n("validation.required",{attribute:n("common.name")}),trigger:"blur"}]}),I=f(!1),X=()=>{r.value=`${n("common.add")} ${n("employee.education")}`,b.value=!0,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},Q=o=>{r.value=`${n("common.edit")} ${n("employee.education")}`,b.value=!0,a.value.id=o.id,a.value.institution=o.institution,a.value.degree=o.degree,a.value.field_of_study=o.field_of_study,a.value.grade=o.grade,a.value.graduation_date=o.graduation_date,a.value.file=o.file_name},N=()=>{b.value=!1,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},G=async()=>{w.value&&w.value.validate(async o=>{if(o){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{I.value=!0;const i=a.value.id?`/education/${a.value.id}/update`:"/education/store";await E({method:"post",url:i,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),b.value=!1,Y(),N(),y({message:n("message.success_save"),type:"success"})}catch{I.value=!1,y({message:n("message.error_server"),type:"error"})}t.close()}else y({message:n("message.error_input"),type:"error"})})},u=o=>{ke.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{E.delete(`/education/${o}/delete`).then(()=>{Y(),y({type:"success",message:n("message.delete_success")})}).catch(t=>{y({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:n("message.delete_cancel")})})};return(o,t)=>{const i=ae,_=ie,K=fe,H=pe,J=ce,Z=de,A=_e,q=be,g=ye,$=$e,k=Fe,W=Se,v=qe,x=ge,s=ve,h=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Be,m(o.$t("employee.education",2)),1),e(i,{type:"primary",disabled:p(B),onClick:V(X,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${o.$t("common.add")} ${o.$t("employee.education")}`),1)]),_:1},8,["disabled"])],2),e(A,{loading:p(B),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(U)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(U),onSortChange:P},{default:l(()=>[e(_,{label:o.$t("employee.degree"),sortable:""},{default:l(S=>[d(m(S.row.degree?o.$t(`employee.${S.row.degree}`):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.institution"),sortable:""},{default:l(S=>[d(m(S.row.institution??"-"),1),t[7]||(t[7]=C("br",null,null,-1)),d(" "+m(S.row.field_of_study??"-"),1)]),_:1},8,["label"]),e(_,{prop:"grade",label:o.$t("employee.grade"),sortable:""},null,8,["label"]),e(_,{label:o.$t("employee.graduation_date"),sortable:""},{default:l(S=>[d(m(S.row.graduation_date?p(F)(S.row.graduation_date):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.document")},{default:l(S=>[S.row.file_path?(z(),Ce(i,{key:0,tag:"a",target:"_blank",href:S.row.file_path},{default:l(()=>t[8]||(t[8]=[d(" Download File ")])),_:2},1032,["href"])):(z(),ee("span",Le,"-"))]),_:1},8,["label"]),e(_,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(S=>[e(J,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(H,null,{default:l(()=>[e(K,{class:"flex justify-between",onClick:V(Me=>Q(S.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(K,{class:"flex justify-between",onClick:V(Me=>u(S.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(i,{type:"primary"},{default:l(()=>[d(m(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(h,{id:"modalForm",modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=S=>b.value=S),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(s,{"label-position":"top",ref_key:"formRef",ref:w,model:a.value,rules:O.value,onSubmit:V(G,["prevent"])},{default:l(()=>[e(x,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(q,{modelValue:a.value.institution,"onUpdate:modelValue":t[0]||(t[0]=S=>a.value.institution=S),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.degree")},{default:l(()=>[e(W,{modelValue:a.value.degree,"onUpdate:modelValue":t[1]||(t[1]=S=>a.value.degree=S),class:"w-full",placeholder:o.$t("common.select")},{default:l(()=>[e(k,{value:"elementary_school",label:o.$t("employee.elementary_school")},null,8,["label"]),e(k,{value:"junior_high_school",label:o.$t("employee.junior_high_school")},null,8,["label"]),e(k,{value:"senior_high_school",label:o.$t("employee.senior_high_school")},null,8,["label"]),e(k,{value:"diploma",label:o.$t("employee.diploma")},null,8,["label"]),e(k,{value:"bachelor",label:o.$t("employee.bachelor")},null,8,["label"]),e(k,{value:"master",label:o.$t("employee.master")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.field_of_study")},{default:l(()=>[e(q,{modelValue:a.value.field_of_study,"onUpdate:modelValue":t[2]||(t[2]=S=>a.value.field_of_study=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.grade")},{default:l(()=>[e(q,{modelValue:a.value.grade,"onUpdate:modelValue":t[3]||(t[3]=S=>a.value.grade=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.graduation_date")},{default:l(()=>[e(v,{modelValue:a.value.graduation_date,"onUpdate:modelValue":t[4]||(t[4]=S=>a.value.graduation_date=S),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.document")},{default:l(()=>[e(he,{modelValue:a.value.file,"onUpdate:modelValue":t[5]||(t[5]=S=>a.value.file=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",Pe,[e(i,{onClick:V(N,["prevent"])},{default:l(()=>[d(m(o.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ie={class:"font-semibold my-auto"},Ne={class:"text-end"},il={__name:"Experience",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F,objectToFormData:c}=me(),{t:n}=ue(),j=f({q:"",employeeId:D.employee}),R=async({queryKey:o})=>{const[t,i]=o;return(await E.get("/experience",{params:i})).data},{data:U,isLoading:B,isError:le,error:L,refetch:Y}=re({queryKey:[`showEmployeeExperience-${D.employee}`,j.value],queryFn:R,keepPreviousData:!0});ne.debounce(()=>{j.value.page=1,Y()},2e3);const P=()=>{Y()},w=f(null),b=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,title:null,company:null,location:null,from:null,to:null,description:null,file:null}),O=f({title:[{required:!0,message:n("validation.required",{attribute:n("employee.title")}),trigger:"blur"}],company:[{required:!0,message:n("validation.required",{attribute:n("employee.company")}),trigger:"blur"}],location:[{required:!0,message:n("validation.required",{attribute:n("employee.location")}),trigger:"blur"}],from:[{required:!0,message:n("validation.required",{attribute:n("common.from")}),trigger:"blur"}],to:[{required:!0,message:n("validation.required",{attribute:n("common.to")}),trigger:"blur"}]}),I=f(!1),X=()=>{r.value=`${n("common.add")} ${n("employee.experience")}`,b.value=!0,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},Q=o=>{r.value=`${n("common.edit")} ${n("employee.experience")}`,b.value=!0,a.value.id=o.id,a.value.institution=o.institution,a.value.degree=o.degree,a.value.field_of_study=o.field_of_study,a.value.grade=o.grade,a.value.graduation_date=o.graduation_date,a.value.file=o.file_name},N=()=>{b.value=!1,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},G=async()=>{w.value&&w.value.validate(async o=>{if(o){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{I.value=!0;const i=a.value.id?`/experience/${a.value.id}/update`:"/experience/store";await E({method:"post",url:i,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),b.value=!1,Y(),N(),y({message:n("message.success_save"),type:"success"})}catch{I.value=!1,y({message:n("message.error_server"),type:"error"})}t.close()}else y({message:n("message.error_input"),type:"error"})})},u=o=>{ke.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{E.delete(`/experience/${o}/delete`).then(()=>{Y(),y({type:"success",message:n("message.delete_success")})}).catch(t=>{y({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:n("message.delete_cancel")})})};return(o,t)=>{const i=ae,_=ie,K=fe,H=pe,J=ce,Z=de,A=_e,q=be,g=ye,$=$e,k=qe,W=ge,v=ve,x=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Ie,m(o.$t("employee.experience")),1),e(i,{type:"primary",disabled:p(B),onClick:V(X,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${o.$t("common.add")} ${o.$t("employee.experience")}`),1)]),_:1},8,["disabled"])],2),e(A,{loading:p(B),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(U)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(U),onSortChange:P},{default:l(()=>[e(_,{prop:"title",label:o.$t("employee.title"),sortable:""},{default:l(s=>[d(m(s.row.title??"-"),1)]),_:1},8,["label"]),e(_,{prop:"company",label:o.$t("employee.company"),sortable:""},{default:l(s=>[d(m(s.row.company??"-"),1),t[8]||(t[8]=C("br",null,null,-1)),d(" "+m(s.row.location??"-"),1)]),_:1},8,["label"]),e(_,{prop:"description",label:o.$t("common.description"),sortable:""},null,8,["label"]),e(_,{label:o.$t("common.from"),sortable:""},{default:l(s=>[d(m(s.row.from?p(F)(s.row.from):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("common.to"),sortable:""},{default:l(s=>[d(m(s.row.to?p(F)(s.row.to):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(J,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(H,null,{default:l(()=>[e(K,{class:"flex justify-between",onClick:V(h=>Q(s.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(K,{class:"flex justify-between",onClick:V(h=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(i,{type:"primary"},{default:l(()=>[d(m(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(x,{id:"modalForm",modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=s=>b.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(v,{"label-position":"top",ref_key:"formRef",ref:w,model:a.value,rules:O.value,onSubmit:V(G,["prevent"])},{default:l(()=>[e(W,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.title"),prop:"title"},{default:l(()=>[e(q,{modelValue:a.value.title,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.title=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.company"),prop:"company"},{default:l(()=>[e(q,{modelValue:a.value.company,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.company=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.location"),prop:"location"},{default:l(()=>[e(q,{modelValue:a.value.location,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.location=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.from"),prop:"from"},{default:l(()=>[e(k,{modelValue:a.value.from,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.from=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.to"),prop:"to"},{default:l(()=>[e(k,{modelValue:a.value.to,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.to=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.description")},{default:l(()=>[e(q,{modelValue:a.value.description,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.description=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.document")},{default:l(()=>[e(he,{modelValue:a.value.file,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",Ne,[e(i,{onClick:V(N,["prevent"])},{default:l(()=>[d(m(o.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ke={class:"font-semibold my-auto"},Ae={class:"text-end"},cl={__name:"BankAccount",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{objectToFormData:F}=me(),{t:c}=ue(),n=f({q:"",employeeId:D.employee}),j=async({queryKey:u})=>{const[o,t]=u;return(await E.get("/bank-account",{params:t})).data},{data:R,isLoading:U,isError:B,error:le,refetch:L}=re({queryKey:[`showEmployeeBankAccount-${D.employee}`,n.value],queryFn:j,keepPreviousData:!0});ne.debounce(()=>{n.value.page=1,L()},2e3);const Y=()=>{L()},P=f(null),w=f(!1),b=f(""),r=f({id:null,employee_id:D.employee,bank:null,account_no:null,account_name:null,file:null}),a=f({bank:[{required:!0,message:c("validation.required",{attribute:c("employee.bank")}),trigger:"blur"}],account_no:[{required:!0,message:c("validation.required",{attribute:c("employee.account_no")}),trigger:"blur"}],account_name:[{required:!0,message:c("validation.required",{attribute:c("employee.account_name")}),trigger:"blur"}]}),O=f(!1),I=()=>{b.value=`${c("common.add")} ${c("employee.bank_account")}`,w.value=!0,r.value.id=null,r.value.bank=null,r.value.account_name=null,r.value.account_no=null,r.value.file=null},X=u=>{b.value=`${c("common.edit")} ${c("employee.bank_account")}`,w.value=!0,r.value.id=u.id,r.value.bank=u.bank,r.value.account_name=u.account_name,r.value.account_no=u.account_no,r.value.file=u.file_name},Q=()=>{w.value=!1,r.value.id=null,r.value.id=null,r.value.bank=null,r.value.account_name=null,r.value.account_no=null,r.value.file=null},N=async()=>{P.value&&P.value.validate(async u=>{if(u){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{O.value=!0;const t=r.value.id?`/bank-account/${r.value.id}/update`:"/bank-account/store";await E({method:"post",url:t,data:F(r.value),headers:{"Content-Type":"multipart/form-data"}}),w.value=!1,L(),Q(),y({message:c("message.success_save"),type:"success"})}catch{O.value=!1,y({message:c("message.error_server"),type:"error"})}o.close()}else y({message:c("message.error_input"),type:"error"})})},G=u=>{ke.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{E.delete(`/bank-account/${u}/delete`).then(()=>{L(),y({type:"success",message:c("message.delete_success")})}).catch(o=>{y({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:c("message.delete_cancel")})})};return(u,o)=>{const t=ae,i=ie,_=fe,K=pe,H=ce,J=de,Z=_e,A=be,q=ye,g=$e,$=ge,k=ve,W=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Ke,m(u.$t("employee.bank_account",2)),1),e(t,{type:"primary",disabled:p(U),onClick:V(I,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${u.$t("common.add")} ${u.$t("employee.bank_account")}`),1)]),_:1},8,["disabled"])],2),e(Z,{loading:p(U),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(R)?{name:"default",fn:l(()=>[p(R)?(z(),Ce(J,{key:0,class:"min-w-full",data:p(R),onSortChange:Y},{default:l(()=>[e(i,{prop:"bank",label:u.$t("employee.bank"),sortable:""},{default:l(v=>[d(m(v.row.bank??"-"),1)]),_:1},8,["label"]),e(i,{prop:"account_no",label:u.$t("employee.account_no"),sortable:""},{default:l(v=>[d(m(v.row.account_no??"-"),1)]),_:1},8,["label"]),e(i,{prop:"account_name",label:u.$t("employee.account_name"),sortable:""},{default:l(v=>[d(m(v.row.account_name??"-"),1)]),_:1},8,["label"]),e(i,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(v=>[e(H,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(K,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:V(x=>X(v.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:V(x=>G(v.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(t,{type:"primary"},{default:l(()=>[d(m(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):De("",!0)]),key:"0"}:void 0]),1032,["loading"]),e(W,{id:"modalForm",modelValue:w.value,"onUpdate:modelValue":o[4]||(o[4]=v=>w.value=v),title:b.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(k,{"label-position":"top",ref_key:"formRef",ref:P,model:r.value,rules:a.value,onSubmit:V(N,["prevent"])},{default:l(()=>[e($,{gutter:20},{default:l(()=>[e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.bank"),prop:"bank"},{default:l(()=>[e(A,{modelValue:r.value.bank,"onUpdate:modelValue":o[0]||(o[0]=v=>r.value.bank=v),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.account_no"),prop:"account_no"},{default:l(()=>[e(A,{modelValue:r.value.account_no,"onUpdate:modelValue":o[1]||(o[1]=v=>r.value.account_no=v),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.account_name"),prop:"account_name"},{default:l(()=>[e(A,{modelValue:r.value.account_name,"onUpdate:modelValue":o[2]||(o[2]=v=>r.value.account_name=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.document")},{default:l(()=>[e(he,{modelValue:r.value.file,"onUpdate:modelValue":o[3]||(o[3]=v=>r.value.file=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",Ae,[e(t,{onClick:V(Q,["prevent"])},{default:l(()=>[d(m(u.$t("common.cancel")),1)]),_:1}),e(t,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},ze={class:"font-semibold my-auto"},Oe={class:"text-end"},pl={__name:"Agreement",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F,objectToFormData:c}=me(),{t:n}=ue(),j=f({q:"",employeeId:D.employee}),R=async({queryKey:o})=>{const[t,i]=o;return(await E.get("/agreement",{params:i})).data},{data:U,isLoading:B,isError:le,error:L,refetch:Y}=re({queryKey:[`showEmployeeAgreement-${D.employee}`,j.value],queryFn:R,keepPreviousData:!0});ne.debounce(()=>{j.value.page=1,Y()},2e3);const P=()=>{Y()},w=f(null),b=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,ref:null,from:null,to:null,file:null}),O=f({ref:[{required:!0,message:n("validation.required",{attribute:n("employee.document_no")}),trigger:"blur"}],from:[{required:!0,message:n("validation.required",{attribute:n("common.from")}),trigger:"blur"}],to:[{required:!0,message:n("validation.required",{attribute:n("common.to")}),trigger:"blur"}]}),I=f(!1),X=()=>{r.value=`${n("common.add")} ${n("employee.work_agreement")}`,b.value=!0,a.value.id=null,a.value.ref=null,a.value.from=null,a.value.to=null,a.value.file=null},Q=o=>{r.value=`${n("common.edit")} ${n("employee.work_agreement")}`,b.value=!0,a.value.id=o.id,a.value.ref=o.ref,a.value.from=o.from,a.value.to=o.to,a.value.file=o.file_name},N=()=>{b.value=!1,a.value.id=null,a.value.ref=null,a.value.from=null,a.value.to=null,a.value.file=null},G=async()=>{w.value&&w.value.validate(async o=>{if(o){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{I.value=!0;const i=a.value.id?`/agreement/${a.value.id}/update`:"/agreement/store";await E({method:"post",url:i,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),b.value=!1,Y(),N(),y({message:n("message.success_save"),type:"success"})}catch{I.value=!1,y({message:n("message.error_server"),type:"error"})}t.close()}else y({message:n("message.error_input"),type:"error"})})},u=o=>{ke.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{E.delete(`/agreement/${o}/delete`).then(()=>{Y(),y({type:"success",message:n("message.delete_success")})}).catch(t=>{y({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:n("message.delete_cancel")})})};return(o,t)=>{const i=ae,_=ie,K=fe,H=pe,J=ce,Z=de,A=_e,q=be,g=ye,$=$e,k=qe,W=ge,v=ve,x=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",ze,m(o.$t("employee.work_agreement",2)),1),e(i,{type:"primary",disabled:p(B),onClick:V(X,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${o.$t("common.add")} ${o.$t("employee.work_agreement")}`),1)]),_:1},8,["disabled"])],2),e(A,{loading:p(B),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(U)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(U),onSortChange:P},{default:l(()=>[e(_,{prop:"ref",label:o.$t("common.type"),sortable:""},{default:l(s=>[d(m(s.row.type??"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.valid_date"),sortable:""},{default:l(s=>[d(m(s.row.from?p(F)(s.row.from):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("common.to"),sortable:""},{default:l(s=>[d(m(s.row.to?p(F)(s.row.to):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(J,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(H,null,{default:l(()=>[e(K,{class:"flex justify-between",onClick:V(h=>Q(s.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(K,{class:"flex justify-between",onClick:V(h=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(i,{type:"primary"},{default:l(()=>[d(m(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(x,{id:"modalForm",modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=s=>b.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(v,{"label-position":"top",ref_key:"formRef",ref:w,model:a.value,rules:O.value,onSubmit:V(G,["prevent"])},{default:l(()=>[e(W,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.document_no"),prop:"ref"},{default:l(()=>[e(q,{modelValue:a.value.ref,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.ref=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.from"),prop:"from"},{default:l(()=>[e(k,{modelValue:a.value.from,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.from=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.to"),prop:"to"},{default:l(()=>[e(k,{modelValue:a.value.to,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.to=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.document")},{default:l(()=>[e(he,{modelValue:a.value.file,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",Oe,[e(i,{onClick:V(N,["prevent"])},{default:l(()=>[d(m(o.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Qe={class:"font-semibold my-auto"},We={class:"text-end"},fl={__name:"Certification",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F,objectToFormData:c}=me(),{t:n}=ue(),j=f({q:"",employeeId:D.employee}),R=async({queryKey:o})=>{const[t,i]=o;return(await E.get("/certification",{params:i})).data},{data:U,isLoading:B,isError:le,error:L,refetch:Y}=re({queryKey:[`showEmployeeCertification-${D.employee}`,j.value],queryFn:R,keepPreviousData:!0});ne.debounce(()=>{j.value.page=1,Y()},2e3);const P=()=>{Y()},w=f(null),b=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,name:null,institution:null,level:null,issued_date:null,valid_date:null,file:null}),O=f({name:[{required:!0,message:n("validation.required",{attribute:n("common.name")}),trigger:"blur"}],institution:[{required:!0,message:n("validation.required",{attribute:n("employee.institution")}),trigger:"blur"}],level:[{required:!0,message:n("validation.required",{attribute:n("employee.level")}),trigger:"blur"}],issued_date:[{required:!0,message:n("validation.required",{attribute:n("employee.issued_date")}),trigger:"blur"}],valid_date:[{required:!0,message:n("validation.required",{attribute:n("employee.valid_date")}),trigger:"blur"}]}),I=f(!1),X=()=>{r.value=`${n("common.add")} ${n("employee.certification")}`,b.value=!0,a.value.id=null,a.value.institution=null,a.value.name=null,a.value.level=null,a.value.issued_date=null,a.value.valid_date=null,a.value.file=null},Q=o=>{r.value=`${n("common.edit")} ${n("employee.certification")}`,b.value=!0,a.value.id=o.id,a.value.institution=o.institution,a.value.name=o.name,a.value.level=o.level,a.value.issued_date=o.issued_date,a.value.valid_date=o.valid_date,a.value.file=o.file_name},N=()=>{b.value=!1,a.value.id=null,a.value.institution=null,a.value.name=null,a.value.level=null,a.value.issued_date=null,a.value.valid_date=null,a.value.file=null},G=async()=>{w.value&&w.value.validate(async o=>{if(o){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{I.value=!0;const i=a.value.id?`/certification/${a.value.id}/update`:"/certification/store";await E({method:"post",url:i,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),b.value=!1,Y(),N(),y({message:n("message.success_save"),type:"success"})}catch{I.value=!1,y({message:n("message.error_server"),type:"error"})}t.close()}else y({message:n("message.error_input"),type:"error"})})},u=o=>{ke.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{E.delete(`/certification/${o}/delete`).then(()=>{Y(),y({type:"success",message:n("message.delete_success")})}).catch(t=>{y({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:n("message.delete_cancel")})})};return(o,t)=>{const i=ae,_=ie,K=fe,H=pe,J=ce,Z=de,A=_e,q=be,g=ye,$=$e,k=qe,W=ge,v=ve,x=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Qe,m(o.$t("employee.certification",2)),1),e(i,{type:"primary",disabled:p(B),onClick:V(X,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${o.$t("common.add")} ${o.$t("employee.certification")}`),1)]),_:1},8,["disabled"])],2),e(A,{loading:p(B),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(U)?{name:"default",fn:l(()=>[p(U)?(z(),Ce(Z,{key:0,class:"min-w-full",data:p(U),onSortChange:P},{default:l(()=>[e(_,{prop:"name",label:o.$t("common.name"),sortable:""},{default:l(s=>[d(m(s.row.name??"-"),1),t[7]||(t[7]=C("br",null,null,-1)),d(" "+m(s.row.institution??"-"),1)]),_:1},8,["label"]),e(_,{prop:"result",label:o.$t("employee.result"),sortable:""},{default:l(s=>[d(m(s.row.result??"-"),1)]),_:1},8,["label"]),e(_,{prop:"level",label:o.$t("employee.level"),sortable:""},null,8,["label"]),e(_,{label:o.$t("employee.issued_date"),sortable:""},{default:l(s=>[d(m(s.row.issued_date?p(F)(s.row.issued_date):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.valid_date"),sortable:""},{default:l(s=>[d(m(s.row.valid_date?p(F)(s.row.valid_date):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(J,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(H,null,{default:l(()=>[e(K,{class:"flex justify-between",onClick:V(h=>Q(s.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(K,{class:"flex justify-between",onClick:V(h=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(i,{type:"primary"},{default:l(()=>[d(m(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):De("",!0)]),key:"0"}:void 0]),1032,["loading"]),e(x,{id:"modalForm",modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=s=>b.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(v,{"label-position":"top",ref_key:"formRef",ref:w,model:a.value,rules:O.value,onSubmit:V(G,["prevent"])},{default:l(()=>[e(W,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(g,{label:o.$t("common.name"),prop:"name"},{default:l(()=>[e(q,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.name=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(q,{modelValue:a.value.institution,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.institution=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.level"),prop:"level"},{default:l(()=>[e(q,{modelValue:a.value.level,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.level=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.issued_date"),prop:"issued_date"},{default:l(()=>[e(k,{modelValue:a.value.issued_date,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.issued_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.valid_date"),prop:"valid_date"},{default:l(()=>[e(k,{modelValue:a.value.valid_date,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.valid_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.document")},{default:l(()=>[e(he,{modelValue:a.value.file,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",We,[e(i,{onClick:V(N,["prevent"])},{default:l(()=>[d(m(o.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Xe={class:"font-semibold my-auto"},Ge={key:1},He={class:"text-end"},_l={__name:"Insurance",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{objectToFormData:F}=me(),{t:c}=ue(),n=f({q:"",employeeId:D.employee}),j=async({queryKey:u})=>{const[o,t]=u;return(await E.get("/insurance",{params:t})).data},{data:R,isLoading:U,isError:B,error:le,refetch:L}=re({queryKey:[`showEmployeeInsurance-${D.employee}`,n.value],queryFn:j,keepPreviousData:!0});ne.debounce(()=>{n.value.page=1,L()},2e3);const Y=()=>{L()},P=f(null),w=f(!1),b=f(""),r=f({id:null,employee_id:D.employee,name:null,card_no:null,file:null}),a=f({name:[{required:!0,message:c("validation.required",{attribute:c("common.name")}),trigger:"blur"}],card_no:[{required:!0,message:c("validation.required",{attribute:c("employee.card_no")}),trigger:"blur"}]}),O=f(!1),I=()=>{b.value=`${c("common.add")} ${c("employee.insurance")}`,w.value=!0,r.value.id=null,r.value.name=null,r.value.card_no=null,r.value.file=null},X=u=>{b.value=`${c("common.edit")} ${c("employee.insurance")}`,w.value=!0,r.value.id=u.id,r.value.name=u.name,r.value.card_no=u.card_no,r.value.file=u.file_name},Q=()=>{w.value=!1,r.value.id=null,r.value.name=null,r.value.card_no=null,r.value.file=null},N=async()=>{P.value&&P.value.validate(async u=>{if(u){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{O.value=!0;const t=r.value.id?`/insurance/${r.value.id}/update`:"/insurance/store";await E({method:"post",url:t,data:F(r.value),headers:{"Content-Type":"multipart/form-data"}}),w.value=!1,L(),Q(),y({message:c("message.success_save"),type:"success"})}catch{O.value=!1,y({message:c("message.error_server"),type:"error"})}o.close()}else y({message:c("message.error_input"),type:"error"})})},G=u=>{ke.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{E.delete(`/insurance/${u}/delete`).then(()=>{L(),y({type:"success",message:c("message.delete_success")})}).catch(o=>{y({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:c("message.delete_cancel")})})};return(u,o)=>{const t=ae,i=ie,_=fe,K=pe,H=ce,J=de,Z=_e,A=be,q=ye,g=$e,$=ge,k=ve,W=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Xe,m(u.$t("employee.insurance",2)),1),e(t,{type:"primary",disabled:p(U),onClick:V(I,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${u.$t("common.add")} ${u.$t("employee.insurance")}`),1)]),_:1},8,["disabled"])],2),e(Z,{loading:p(U),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(R)?{name:"default",fn:l(()=>[e(J,{class:"min-w-full",data:p(R),onSortChange:Y},{default:l(()=>[e(i,{prop:"name",label:u.$t("common.name"),sortable:""},{default:l(v=>[d(m(v.row.name??"-"),1)]),_:1},8,["label"]),e(i,{prop:"card_no",label:u.$t("employee.card_no"),sortable:""},{default:l(v=>[d(m(v.row.card_no??"-"),1)]),_:1},8,["label"]),e(i,{label:u.$t("employee.document")},{default:l(v=>[v.row.file_path?(z(),Ce(t,{key:0,tag:"a",target:"_blank",href:v.row.file_path},{default:l(()=>o[4]||(o[4]=[d(" Download File ")])),_:2},1032,["href"])):(z(),ee("span",Ge,"-"))]),_:1},8,["label"]),e(i,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(v=>[e(H,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(K,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:V(x=>X(v.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:V(x=>G(v.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(t,{type:"primary"},{default:l(()=>[d(m(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(W,{id:"modalForm",modelValue:w.value,"onUpdate:modelValue":o[3]||(o[3]=v=>w.value=v),title:b.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(k,{"label-position":"top",ref_key:"formRef",ref:P,model:r.value,rules:a.value,onSubmit:V(N,["prevent"])},{default:l(()=>[e($,{gutter:20},{default:l(()=>[e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("common.name"),prop:"name"},{default:l(()=>[e(A,{modelValue:r.value.name,"onUpdate:modelValue":o[0]||(o[0]=v=>r.value.name=v),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(g,{md:12},{default:l(()=>[e(q,{label:u.$t("employee.card_no"),prop:"card_no"},{default:l(()=>[e(A,{modelValue:r.value.card_no,"onUpdate:modelValue":o[1]||(o[1]=v=>r.value.card_no=v),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(g,{md:24},{default:l(()=>[e(q,{label:u.$t("employee.document")},{default:l(()=>[e(he,{modelValue:r.value.file,"onUpdate:modelValue":o[2]||(o[2]=v=>r.value.file=v)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",He,[e(t,{onClick:V(Q,["prevent"])},{default:l(()=>[d(m(u.$t("common.cancel")),1)]),_:1}),e(t,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Je={class:"font-semibold my-auto"},Ze={key:1},xe={class:"text-end"},vl={__name:"Medical",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(M){const D=M,{formatDate:F,objectToFormData:c}=me(),{t:n}=ue(),j=f({q:"",employeeId:D.employee}),R=async({queryKey:o})=>{const[t,i]=o;return(await E.get("/medical",{params:i})).data},{data:U,isLoading:B,isError:le,error:L,refetch:Y}=re({queryKey:[`showEmployeeMedical-${D.employee}`,j.value],queryFn:R,keepPreviousData:!0});ne.debounce(()=>{j.value.page=1,Y()},2e3);const P=()=>{Y()},w=f(null),b=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,institution:null,result:null,note:null,taken_date:null,valid_date:null,file:null}),O=f({institution:[{required:!0,message:n("validation.required",{attribute:n("employee.institution")}),trigger:"blur"}],result:[{required:!0,message:n("validation.required",{attribute:n("employee.result")}),trigger:"blur"}],taken_date:[{required:!0,message:n("validation.required",{attribute:n("employee.taken_date")}),trigger:"blur"}],valid_date:[{required:!0,message:n("validation.required",{attribute:n("employee.valid_date")}),trigger:"blur"}]}),I=f(!1),X=()=>{r.value=`${n("common.add")} ${n("employee.medical_checkup")}`,b.value=!0,a.value.id=null,a.value.institution=null,a.value.result=null,a.value.note=null,a.value.taken_date=null,a.value.valid_date=null,a.value.file=null},Q=o=>{r.value=`${n("common.edit")} ${n("employee.medical_checkup")}`,b.value=!0,a.value.id=o.id,a.value.institution=o.institution,a.value.result=o.result,a.value.note=o.note,a.value.taken_date=o.taken_date,a.value.valid_date=o.valid_date,a.value.file=o.file_name},N=()=>{b.value=!1,a.value.id=null,a.value.institution=null,a.value.result=null,a.value.note=null,a.value.taken_date=null,a.value.valid_date=null,a.value.file=null},G=async()=>{w.value&&w.value.validate(async o=>{if(o){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{I.value=!0;const i=a.value.id?`/medical/${a.value.id}/update`:"/medical/store";await E({method:"post",url:i,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),b.value=!1,Y(),N(),y({message:n("message.success_save"),type:"success"})}catch{I.value=!1,y({message:n("message.error_server"),type:"error"})}t.close()}else y({message:n("message.error_input"),type:"error"})})},u=o=>{ke.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{E.delete(`/medical/${o}/delete`).then(()=>{Y(),y({type:"success",message:n("message.delete_success")})}).catch(t=>{y({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{y({type:"info",message:n("message.delete_cancel")})})};return(o,t)=>{const i=ae,_=ie,K=fe,H=pe,J=ce,Z=de,A=_e,q=be,g=ye,$=$e,k=qe,W=ge,v=ve,x=we;return z(),ee("div",null,[C("div",{class:oe(["flex items-center align-middle justify-between mb-2 py-2",M.headerClass])},[C("div",Je,m(o.$t("employee.medical_checkup",2)),1),e(i,{type:"primary",disabled:p(B),onClick:V(X,["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${o.$t("common.add")} ${o.$t("employee.medical_checkup")}`),1)]),_:1},8,["disabled"])],2),e(A,{loading:p(B),animated:""},te({template:l(()=>[e(se,{rows:5})]),_:2},[p(U)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(U),onSortChange:P},{default:l(()=>[e(_,{prop:"institution",label:o.$t("employee.institution"),sortable:""},{default:l(s=>[d(m(s.row.institution??"-"),1)]),_:1},8,["label"]),e(_,{prop:"result",label:o.$t("employee.result"),sortable:""},{default:l(s=>[d(m(s.row.result??"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.taken_date"),sortable:""},{default:l(s=>[d(m(s.row.taken_date?p(F)(s.row.taken_date):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.valid_date"),sortable:""},{default:l(s=>[d(m(s.row.valid_date?p(F)(s.row.valid_date):"-"),1)]),_:1},8,["label"]),e(_,{label:o.$t("employee.document")},{default:l(s=>[s.row.file_path?(z(),Ce(i,{key:0,tag:"a",target:"_blank",href:s.row.file_path},{default:l(()=>t[7]||(t[7]=[d(" Download File ")])),_:2},1032,["href"])):(z(),ee("span",Ze,"-"))]),_:1},8,["label"]),e(_,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(J,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(H,null,{default:l(()=>[e(K,{class:"flex justify-between",onClick:V(h=>Q(s.row),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(K,{class:"flex justify-between",onClick:V(h=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(T),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(i,{type:"primary"},{default:l(()=>[d(m(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(x,{id:"modalForm",modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=s=>b.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(v,{"label-position":"top",ref_key:"formRef",ref:w,model:a.value,rules:O.value,onSubmit:V(G,["prevent"])},{default:l(()=>[e(W,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(q,{modelValue:a.value.institution,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.institution=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.result"),prop:"result"},{default:l(()=>[e(q,{modelValue:a.value.result,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.result=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.taken_date"),prop:"taken_date"},{default:l(()=>[e(k,{modelValue:a.value.taken_date,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.taken_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(g,{label:o.$t("employee.valid_date"),prop:"valid_date"},{default:l(()=>[e(k,{modelValue:a.value.valid_date,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.valid_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:24},{default:l(()=>[e(g,{label:o.$t("employee.note"),prop:"note"},{default:l(()=>[e(q,{type:"textarea",rows:2,modelValue:a.value.note,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.note=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:24},{default:l(()=>[e(g,{label:o.$t("employee.document")},{default:l(()=>[e(he,{modelValue:a.value.file,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),C("div",xe,[e(i,{onClick:V(N,["prevent"])},{default:l(()=>[d(m(o.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary","native-type":"submit"},{default:l(()=>[d(m(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{ml as _,dl as a,il as b,cl as c,pl as d,fl as e,_l as f,vl as g,he as h};
