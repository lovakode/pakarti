import{r as f,c as te,o as J,a as q,W as e,U as d,O as l,T as i,u as p,$ as k,Q as ae,ak as ne,f as Me,M as Ce,R as Ye}from"./@vue-BedgDXZT.js";import{a as j}from"./axios-D8rVyQy1.js";import{I as R}from"./@iconify-BzSLy_Lz.js";import{_ as ue}from"./lodash-G2ORfQRs.js";import{u as re}from"./vue-i18n-3uPOuKlG.js";import{_ as se}from"./SkeletonTable-CkoHEoRM.js";import{u as de}from"./@tanstack-D5MgbqGz.js";import{b as me}from"./app-ChQKHz3m.js";import{k as oe,q as ie,r as ce,a as pe,b as fe,c as _e,y as ve,m as ye,n as be,o as ge,g as $e,h as we,F as De,w as Se,x as Fe,l as ke,B as he,p as v,J as Ve}from"./element-plus-B3W2dA5h.js";const Ee={class:"font-semibold my-auto"},Te={class:"text-end"},pl={__name:"Family",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M}=me(),{t:c}=re(),n=f({q:"",employeeId:D.employee}),N=async({queryKey:u})=>{const[t,o]=u;return(await j.get("/family",{params:o})).data},{data:I,isLoading:E,isError:P,error:le,refetch:K}=de({queryKey:["showEmployeeFamilies",n.value],queryFn:N,keepPreviousData:!0});ue.debounce(()=>{n.value.page=1,K()},2e3);const F=()=>{K()},B=f(null),V=f(!1),g=f(""),r=f({id:null,name:null,employee_id:D.employee,birth_date:null,birth_place:null,relationship:null,phone:null,religion:null}),a=f({name:[{required:!0,message:c("validation.required",{attribute:c("common.name")}),trigger:"blur"}],birth_date:[{required:!0,message:c("validation.required",{attribute:c("employee.birth_date")}),trigger:"blur"}],birth_place:[{required:!0,message:c("validation.required",{attribute:c("employee.birth_place")}),trigger:"blur"}],relationship:[{required:!0,message:c("validation.required",{attribute:c("employee.relationship")}),trigger:"blur"}],phone:[{required:!0,message:c("validation.required",{attribute:c("common.phone")}),trigger:"blur"},{pattern:/^[0-9]+$/,message:c("validation.numeric",{attribute:c("common.phone")}),trigger:"blur"}],religion:[{required:!0,message:c("validation.required",{attribute:c("employee.religion")}),trigger:"blur"}]}),y=f(!1),A=()=>{g.value=`${c("common.add")} ${c("employee.family")}`,V.value=!0,r.value.id=null,r.value.name=null,r.value.birth_date=null,r.value.birth_place=null,r.value.relationship=null,r.value.religion=null,r.value.phone=null},G=u=>{g.value=`${c("common.edit")} ${c("employee.family")}`,V.value=!0,r.value.id=u.id,r.value.name=u.name,r.value.birth_date=u.birth_date,r.value.birth_place=u.birth_place,r.value.relationship=u.relationship,r.value.religion=u.religion,r.value.phone=u.phone},W=()=>{V.value=!1,r.value.id=null,r.value.name=null,r.value.name=null,r.value.birth_date=null,r.value.birth_place=null,r.value.relationship=null,r.value.religion=null,r.value.phone=null},z=async()=>{B.value&&B.value.validate(async u=>{if(u){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{y.value=!0;const o=r.value.id?`/family/${r.value.id}/update`:"/family/store";await j({method:"post",url:o,data:r.value}),V.value=!1,K(),W(),v({message:c("message.success_save"),type:"success"})}catch{y.value=!1,v({message:c("message.error_server"),type:"error"})}t.close()}else v({message:c("message.error_input"),type:"error"})})},H=u=>{he.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{j.delete(`/family/${u}/delete`).then(()=>{K(),v({type:"success",message:c("message.delete_success")})}).catch(t=>{v({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:c("message.delete_cancel")})})};return(u,t)=>{const o=oe,m=ce,_=_e,T=fe,X=pe,Z=ie,x=ve,O=ge,Y=be,$=De,h=we,w=Fe,Q=Se,b=$e,ee=ye,s=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Ee,d(u.$t("employee.family_member",2)),1),e(o,{type:"primary",disabled:p(E),onClick:k(A,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${u.$t("common.add")} ${u.$t("employee.family_member")}`),1)]),_:1},8,["disabled"])],2),e(x,{loading:p(E),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(I)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(I),onSortChange:F},{default:l(()=>[e(m,{label:u.$t("common.name"),sortable:""},{default:l(C=>[i(d(C.row.name??"-"),1),t[7]||(t[7]=q("br",null,null,-1)),i(" "+d(C.row.relationship??"-"),1)]),_:1},8,["label"]),e(m,{label:u.$t("employee.birth_date"),sortable:""},{default:l(C=>[i(d(C.row.birth_place??"-"),1),t[8]||(t[8]=q("br",null,null,-1)),i(" "+d(C.row.birth_date?p(M)(C.row.birth_date):"-"),1)]),_:1},8,["label"]),e(m,{label:u.$t("employee.religion"),sortable:""},{default:l(C=>[i(d(C.row.religion?u.$t(`employee.${C.row.religion}`):"-"),1),t[9]||(t[9]=q("br",null,null,-1))]),_:1},8,["label"]),e(m,{prop:"phone",label:u.$t("common.phone"),sortable:""},null,8,["label"]),e(m,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(C=>[e(X,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(T,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:k(S=>G(C.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:k(S=>H(C.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(o,{type:"primary"},{default:l(()=>[i(d(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(s,{id:"modalForm",modelValue:V.value,"onUpdate:modelValue":t[6]||(t[6]=C=>V.value=C),title:g.value,class:"!sm:w-full !w-1/3 rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(ee,{"label-position":"top",ref_key:"formRef",ref:B,model:r.value,rules:a.value,onSubmit:k(z,["prevent"])},{default:l(()=>[e(Y,{label:u.$t("common.name"),prop:"name"},{default:l(()=>[e(O,{modelValue:r.value.name,"onUpdate:modelValue":t[0]||(t[0]=C=>r.value.name=C)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.birth_date"),prop:"birth_date"},{default:l(()=>[e($,{modelValue:r.value.birth_date,"onUpdate:modelValue":t[1]||(t[1]=C=>r.value.birth_date=C),format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.birth_place"),prop:"birth_place"},{default:l(()=>[e(O,{modelValue:r.value.birth_place,"onUpdate:modelValue":t[2]||(t[2]=C=>r.value.birth_place=C)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.relationship"),prop:"relationship"},{default:l(()=>[e(Q,{modelValue:r.value.relationship,"onUpdate:modelValue":t[3]||(t[3]=C=>r.value.relationship=C),class:"w-full",placeholder:u.$t("common.select")},{default:l(()=>[e(w,{value:"wife",label:u.$t("employee.wife")},null,8,["label"]),e(w,{value:"husband",label:u.$t("employee.husband")},null,8,["label"]),e(w,{value:"mother",label:u.$t("employee.mother")},null,8,["label"]),e(w,{value:"father",label:u.$t("employee.father")},null,8,["label"]),e(w,{value:"child",label:u.$t("employee.child")},null,8,["label"]),e(w,{value:"sibling",label:u.$t("employee.sibling")},null,8,["label"]),e(w,{value:"relative",label:u.$t("employee.relative")},null,8,["label"]),e(w,{value:"friend",label:u.$t("employee.friend")},null,8,["label"]),e(w,{value:"colleague",label:u.$t("employee.colleague")},null,8,["label"]),e(w,{value:"other",label:u.$t("employee.other")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.religion"),prop:"religion"},{default:l(()=>[e(Q,{modelValue:r.value.religion,"onUpdate:modelValue":t[4]||(t[4]=C=>r.value.religion=C),class:"w-full",placeholder:u.$t("common.select")},{default:l(()=>[e(w,{value:"islam",label:u.$t("employee.islam")},null,8,["label"]),e(w,{value:"protestant",label:u.$t("employee.protestant")},null,8,["label"]),e(w,{value:"catholic",label:u.$t("employee.catholic")},null,8,["label"]),e(w,{value:"hindu",label:u.$t("employee.hindu")},null,8,["label"]),e(w,{value:"buddha",label:u.$t("employee.buddha")},null,8,["label"]),e(w,{value:"confucian",label:u.$t("employee.confucian")},null,8,["label"]),e(w,{value:"other",label:u.$t("common.other")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(Y,{label:u.$t("common.phone"),prop:"phone"},{default:l(()=>[e(O,{modelValue:r.value.phone,"onUpdate:modelValue":t[5]||(t[5]=C=>r.value.phone=C)},null,8,["modelValue"])]),_:1},8,["label"]),q("div",Te,[e(o,{onClick:k(W,["prevent"])},{default:l(()=>[i(d(u.$t("common.cancel")),1)]),_:1}),e(o,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},je={class:"max-w-full w-full flex items-center"},Re={key:0},Be={key:1,class:"truncate"},qe={__name:"InputFile",props:{modelValue:{type:[File,String],default:null}},emits:["update:modelValue"],setup(U,{emit:D}){const M=U,c=D,n=Me(()=>M.modelValue!==null&&M.modelValue!==void 0&&M.modelValue!==""),N=Me(()=>M.modelValue instanceof File?M.modelValue.name:typeof M.modelValue=="string"?M.modelValue.split("/").pop()||M.modelValue:""),I=P=>{const le=P.target.files[0];le&&c("update:modelValue",le)},E=()=>{c("update:modelValue",null)};return(P,le)=>{const K=oe;return J(),te("div",je,[q("label",{class:ae(["el-button flex items-center justify-center transition-all duration-300",n.value?"w-3/4":"w-full"])},[U.modelValue?(J(),te("span",Be,d(N.value),1)):(J(),te("span",Re,d(P.$t("common.choose_file")),1)),q("input",{type:"file",class:"!hidden",onChange:I},null,32)],2),n.value?(J(),Ce(K,{key:0,onClick:E,type:"danger",class:"w-1/5"},{default:l(()=>le[0]||(le[0]=[q("i",{class:"el-icon"},[q("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})])],-1)])),_:1})):Ye("",!0)])}}},Le={class:"font-semibold my-auto"},Pe={key:1},Ie={class:"text-end"},fl={__name:"Education",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n}=re(),N=f({q:"",employeeId:D.employee}),I=async({queryKey:t})=>{const[o,m]=t;return(await j.get("/education",{params:m})).data},{data:E,isLoading:P,isError:le,error:K,refetch:F}=de({queryKey:[`showEmployeeEducation-${D.employee}`,N.value],queryFn:I,keepPreviousData:!0});ue.debounce(()=>{N.value.page=1,F()},2e3);const B=()=>{F()},V=f(null),g=f(!1),r=f(""),a=f({id:null,name:null,employee_id:D.employee,institution:null,degree:null,field_of_study:null,grade:null,graduation_date:null,file:null}),y=f({institution:[{required:!0,message:n("validation.required",{attribute:n("employee.institution")}),trigger:"blur"}],degree:[{required:!0,message:n("validation.required",{attribute:n("employee.degree")}),trigger:"change"}],field_of_study:[{required:!0,message:n("validation.required",{attribute:n("employee.field_of_study")}),trigger:"blur"}],grade:[{required:!0,message:n("validation.required",{attribute:n("employee.grade")}),trigger:"blur"}],graduation_date:[{required:!0,message:n("validation.required",{attribute:n("employee.graduation_date")}),trigger:"blur"}],file:[{required:!0,message:n("validation.required",{attribute:n("employee.document")}),trigger:"blur"}]}),A=f(!1),G=()=>{r.value=`${n("common.add")} ${n("employee.education")}`,g.value=!0,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},W=t=>{r.value=`${n("common.edit")} ${n("employee.education")}`,g.value=!0,a.value.id=t.id,a.value.institution=t.institution,a.value.degree=t.degree,a.value.field_of_study=t.field_of_study,a.value.grade=t.grade,a.value.graduation_date=t.graduation_date,a.value.file=t.file_name},z=()=>{g.value=!1,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},H=async()=>{V.value&&V.value.validate(async t=>{if(t){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{A.value=!0;const m=a.value.id?`/education/${a.value.id}/update`:"/education/store";await j({method:"post",url:m,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),g.value=!1,F(),z(),v({message:n("message.success_save"),type:"success"})}catch{A.value=!1,v({message:n("message.error_server"),type:"error"})}o.close()}else v({message:n("message.error_input"),type:"error"})})},u=t=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/education/${t}/delete`).then(()=>{F(),v({type:"success",message:n("message.delete_success")})}).catch(o=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(t,o)=>{const m=oe,_=ce,T=_e,X=fe,Z=pe,x=ie,O=ve,Y=ge,$=be,h=we,w=Fe,Q=Se,b=De,ee=$e,s=ye,C=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Le,d(t.$t("employee.education",2)),1),e(m,{type:"primary",disabled:p(P),onClick:k(G,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${t.$t("common.add")} ${t.$t("employee.education")}`),1)]),_:1},8,["disabled"])],2),e(O,{loading:p(P),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(E)?{name:"default",fn:l(()=>[e(x,{class:"min-w-full",data:p(E),onSortChange:B},{default:l(()=>[e(_,{label:t.$t("employee.degree"),sortable:""},{default:l(S=>[i(d(S.row.degree?t.$t(`employee.${S.row.degree}`):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.institution"),sortable:""},{default:l(S=>[i(d(S.row.institution??"-"),1),o[7]||(o[7]=q("br",null,null,-1)),i(" "+d(S.row.field_of_study??"-"),1)]),_:1},8,["label"]),e(_,{prop:"grade",label:t.$t("employee.grade"),sortable:""},null,8,["label"]),e(_,{label:t.$t("employee.graduation_date"),sortable:""},{default:l(S=>[i(d(S.row.graduation_date?p(M)(S.row.graduation_date):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.document")},{default:l(S=>[S.row.file_path?(J(),Ce(m,{key:0,tag:"a",target:"_blank",href:S.row.file_path},{default:l(()=>o[8]||(o[8]=[i(" Download File ")])),_:2},1032,["href"])):(J(),te("span",Pe,"-"))]),_:1},8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:l(S=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(X,null,{default:l(()=>[e(T,{class:"flex justify-between",onClick:k(L=>W(S.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(t.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(T,{class:"flex justify-between",onClick:k(L=>u(S.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(m,{type:"primary"},{default:l(()=>[i(d(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(C,{id:"modalForm",modelValue:g.value,"onUpdate:modelValue":o[6]||(o[6]=S=>g.value=S),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(s,{"label-position":"top",ref_key:"formRef",ref:V,model:a.value,rules:y.value,onSubmit:k(H,["prevent"])},{default:l(()=>[e(ee,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(Y,{modelValue:a.value.institution,"onUpdate:modelValue":o[0]||(o[0]=S=>a.value.institution=S),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.degree"),prop:"degree"},{default:l(()=>[e(Q,{modelValue:a.value.degree,"onUpdate:modelValue":o[1]||(o[1]=S=>a.value.degree=S),class:"w-full",placeholder:t.$t("common.select")},{default:l(()=>[e(w,{value:"elementary_school",label:t.$t("employee.elementary_school")},null,8,["label"]),e(w,{value:"junior_high_school",label:t.$t("employee.junior_high_school")},null,8,["label"]),e(w,{value:"senior_high_school",label:t.$t("employee.senior_high_school")},null,8,["label"]),e(w,{value:"diploma",label:t.$t("employee.diploma")},null,8,["label"]),e(w,{value:"bachelor",label:t.$t("employee.bachelor")},null,8,["label"]),e(w,{value:"master",label:t.$t("employee.master")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.field_of_study"),prop:"field_of_study"},{default:l(()=>[e(Y,{modelValue:a.value.field_of_study,"onUpdate:modelValue":o[2]||(o[2]=S=>a.value.field_of_study=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.grade"),prop:"grade"},{default:l(()=>[e(Y,{modelValue:a.value.grade,"onUpdate:modelValue":o[3]||(o[3]=S=>a.value.grade=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.graduation_date"),prop:"graduation_date"},{default:l(()=>[e(b,{modelValue:a.value.graduation_date,"onUpdate:modelValue":o[4]||(o[4]=S=>a.value.graduation_date=S),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:a.value.file,"onUpdate:modelValue":o[5]||(o[5]=S=>a.value.file=S)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",Ie,[e(m,{onClick:k(z,["prevent"])},{default:l(()=>[i(d(t.$t("common.cancel")),1)]),_:1}),e(m,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(t.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ne={class:"font-semibold my-auto"},Ke={class:"text-end"},_l={__name:"Experience",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n}=re(),N=f({q:"",employeeId:D.employee}),I=async({queryKey:t})=>{const[o,m]=t;return(await j.get("/experience",{params:m})).data},{data:E,isLoading:P,isError:le,error:K,refetch:F}=de({queryKey:[`showEmployeeExperience-${D.employee}`,N.value],queryFn:I,keepPreviousData:!0});ue.debounce(()=>{N.value.page=1,F()},2e3);const B=()=>{F()},V=f(null),g=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,title:null,company:null,location:null,from:null,to:null,description:null,file:null}),y=f({title:[{required:!0,message:n("validation.required",{attribute:n("employee.title")}),trigger:"blur"}],company:[{required:!0,message:n("validation.required",{attribute:n("employee.company")}),trigger:"blur"}],location:[{required:!0,message:n("validation.required",{attribute:n("employee.location")}),trigger:"blur"}],from:[{required:!0,message:n("validation.required",{attribute:n("common.from")}),trigger:"blur"}],to:[{required:!0,message:n("validation.required",{attribute:n("common.to")}),trigger:"blur"}],description:[{required:!0,message:n("validation.required",{attribute:n("common.description")}),trigger:"blur"}]}),A=f(!1),G=()=>{r.value=`${n("common.add")} ${n("employee.experience")}`,g.value=!0,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},W=t=>{r.value=`${n("common.edit")} ${n("employee.experience")}`,g.value=!0,a.value.id=t.id,a.value.institution=t.institution,a.value.degree=t.degree,a.value.field_of_study=t.field_of_study,a.value.grade=t.grade,a.value.graduation_date=t.graduation_date,a.value.file=t.file_name},z=()=>{g.value=!1,a.value.id=null,a.value.institution=null,a.value.degree=null,a.value.field_of_study=null,a.value.grade=null,a.value.graduation_date=null,a.value.file=null},H=async()=>{V.value&&V.value.validate(async t=>{if(t){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{A.value=!0;const m=a.value.id?`/experience/${a.value.id}/update`:"/experience/store";await j({method:"post",url:m,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),g.value=!1,F(),z(),v({message:n("message.success_save"),type:"success"})}catch{A.value=!1,v({message:n("message.error_server"),type:"error"})}o.close()}else v({message:n("message.error_input"),type:"error"})})},u=t=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/experience/${t}/delete`).then(()=>{F(),v({type:"success",message:n("message.delete_success")})}).catch(o=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(t,o)=>{const m=oe,_=ce,T=_e,X=fe,Z=pe,x=ie,O=ve,Y=ge,$=be,h=we,w=De,Q=$e,b=ye,ee=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Ne,d(t.$t("employee.experience")),1),e(m,{type:"primary",disabled:p(P),onClick:k(G,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${t.$t("common.add")} ${t.$t("employee.experience")}`),1)]),_:1},8,["disabled"])],2),e(O,{loading:p(P),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(E)?{name:"default",fn:l(()=>[e(x,{class:"min-w-full",data:p(E),onSortChange:B},{default:l(()=>[e(_,{prop:"title",label:t.$t("employee.title"),sortable:""},{default:l(s=>[i(d(s.row.title??"-"),1)]),_:1},8,["label"]),e(_,{prop:"company",label:t.$t("employee.company"),sortable:""},{default:l(s=>[i(d(s.row.company??"-"),1),o[8]||(o[8]=q("br",null,null,-1)),i(" "+d(s.row.location??"-"),1)]),_:1},8,["label"]),e(_,{prop:"description",label:t.$t("common.description"),sortable:""},null,8,["label"]),e(_,{label:t.$t("common.from"),sortable:""},{default:l(s=>[i(d(s.row.from?p(M)(s.row.from):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("common.to"),sortable:""},{default:l(s=>[i(d(s.row.to?p(M)(s.row.to):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(X,null,{default:l(()=>[e(T,{class:"flex justify-between",onClick:k(C=>W(s.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(t.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(T,{class:"flex justify-between",onClick:k(C=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(m,{type:"primary"},{default:l(()=>[i(d(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(ee,{id:"modalForm",modelValue:g.value,"onUpdate:modelValue":o[7]||(o[7]=s=>g.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(b,{"label-position":"top",ref_key:"formRef",ref:V,model:a.value,rules:y.value,onSubmit:k(H,["prevent"])},{default:l(()=>[e(Q,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.title"),prop:"title"},{default:l(()=>[e(Y,{modelValue:a.value.title,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.title=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.company"),prop:"company"},{default:l(()=>[e(Y,{modelValue:a.value.company,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.company=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.location"),prop:"location"},{default:l(()=>[e(Y,{modelValue:a.value.location,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.location=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.from"),prop:"from"},{default:l(()=>[e(w,{modelValue:a.value.from,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.from=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.to"),prop:"to"},{default:l(()=>[e(w,{modelValue:a.value.to,"onUpdate:modelValue":o[4]||(o[4]=s=>a.value.to=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.description"),prop:"description"},{default:l(()=>[e(Y,{modelValue:a.value.description,"onUpdate:modelValue":o[5]||(o[5]=s=>a.value.description=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:a.value.file,"onUpdate:modelValue":o[6]||(o[6]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",Ke,[e(m,{onClick:k(z,["prevent"])},{default:l(()=>[i(d(t.$t("common.cancel")),1)]),_:1}),e(m,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(t.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ae={class:"font-semibold my-auto"},ze={class:"text-end"},vl={__name:"BankAccount",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{objectToFormData:M}=me(),{t:c}=re(),n=f({q:"",employeeId:D.employee}),N=async({queryKey:u})=>{const[t,o]=u;return(await j.get("/bank-account",{params:o})).data},{data:I,isLoading:E,isError:P,error:le,refetch:K}=de({queryKey:[`showEmployeeBankAccount-${D.employee}`,n.value],queryFn:N,keepPreviousData:!0});ue.debounce(()=>{n.value.page=1,K()},2e3);const F=()=>{K()},B=f(null),V=f(!1),g=f(""),r=f({id:null,employee_id:D.employee,bank:null,account_no:null,account_name:null,file:null}),a=f({bank:[{required:!0,message:c("validation.required",{attribute:c("employee.bank")}),trigger:"blur"}],account_no:[{required:!0,message:c("validation.required",{attribute:c("employee.account_no")}),trigger:"blur"}],account_name:[{required:!0,message:c("validation.required",{attribute:c("employee.account_name")}),trigger:"blur"}]}),y=f(!1),A=()=>{g.value=`${c("common.add")} ${c("employee.bank_account")}`,V.value=!0,r.value.id=null,r.value.bank=null,r.value.account_name=null,r.value.account_no=null,r.value.file=null},G=u=>{g.value=`${c("common.edit")} ${c("employee.bank_account")}`,V.value=!0,r.value.id=u.id,r.value.bank=u.bank,r.value.account_name=u.account_name,r.value.account_no=u.account_no,r.value.file=u.file_name},W=()=>{V.value=!1,r.value.id=null,r.value.id=null,r.value.bank=null,r.value.account_name=null,r.value.account_no=null,r.value.file=null},z=async()=>{B.value&&B.value.validate(async u=>{if(u){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{y.value=!0;const o=r.value.id?`/bank-account/${r.value.id}/update`:"/bank-account/store";await j({method:"post",url:o,data:M(r.value),headers:{"Content-Type":"multipart/form-data"}}),V.value=!1,K(),W(),v({message:c("message.success_save"),type:"success"})}catch{y.value=!1,v({message:c("message.error_server"),type:"error"})}t.close()}else v({message:c("message.error_input"),type:"error"})})},H=u=>{he.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{j.delete(`/bank-account/${u}/delete`).then(()=>{K(),v({type:"success",message:c("message.delete_success")})}).catch(t=>{v({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:c("message.delete_cancel")})})};return(u,t)=>{const o=oe,m=ce,_=_e,T=fe,X=pe,Z=ie,x=ve,O=ge,Y=be,$=we,h=$e,w=ye,Q=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Ae,d(u.$t("employee.bank_account",2)),1),e(o,{type:"primary",disabled:p(E),onClick:k(A,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${u.$t("common.add")} ${u.$t("employee.bank_account")}`),1)]),_:1},8,["disabled"])],2),e(x,{loading:p(E),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(I)?{name:"default",fn:l(()=>[p(I)?(J(),Ce(Z,{key:0,class:"min-w-full",data:p(I),onSortChange:F},{default:l(()=>[e(m,{prop:"bank",label:u.$t("employee.bank"),sortable:""},{default:l(b=>[i(d(b.row.bank??"-"),1)]),_:1},8,["label"]),e(m,{prop:"account_no",label:u.$t("employee.account_no"),sortable:""},{default:l(b=>[i(d(b.row.account_no??"-"),1)]),_:1},8,["label"]),e(m,{prop:"account_name",label:u.$t("employee.account_name"),sortable:""},{default:l(b=>[i(d(b.row.account_name??"-"),1)]),_:1},8,["label"]),e(m,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(b=>[e(X,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(T,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:k(ee=>G(b.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:k(ee=>H(b.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(o,{type:"primary"},{default:l(()=>[i(d(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):Ye("",!0)]),key:"0"}:void 0]),1032,["loading"]),e(Q,{id:"modalForm",modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=b=>V.value=b),title:g.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(w,{"label-position":"top",ref_key:"formRef",ref:B,model:r.value,rules:a.value,onSubmit:k(z,["prevent"])},{default:l(()=>[e(h,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.bank"),prop:"bank"},{default:l(()=>[e(O,{modelValue:r.value.bank,"onUpdate:modelValue":t[0]||(t[0]=b=>r.value.bank=b),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.account_no"),prop:"account_no"},{default:l(()=>[e(O,{modelValue:r.value.account_no,"onUpdate:modelValue":t[1]||(t[1]=b=>r.value.account_no=b),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.account_name"),prop:"account_name"},{default:l(()=>[e(O,{modelValue:r.value.account_name,"onUpdate:modelValue":t[2]||(t[2]=b=>r.value.account_name=b)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:r.value.file,"onUpdate:modelValue":t[3]||(t[3]=b=>r.value.file=b)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",ze,[e(o,{onClick:k(W,["prevent"])},{default:l(()=>[i(d(u.$t("common.cancel")),1)]),_:1}),e(o,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Oe={class:"font-semibold my-auto"},Qe={class:"text-end"},yl={__name:"Agreement",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n}=re(),N=f({q:"",employeeId:D.employee}),I=async({queryKey:t})=>{const[o,m]=t;return(await j.get("/agreement",{params:m})).data},{data:E,isLoading:P,isError:le,error:K,refetch:F}=de({queryKey:[`showEmployeeAgreement-${D.employee}`,N.value],queryFn:I,keepPreviousData:!0});ue.debounce(()=>{N.value.page=1,F()},2e3);const B=()=>{F()},V=f(null),g=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,ref:null,from:null,to:null,file:null}),y=f({ref:[{required:!0,message:n("validation.required",{attribute:n("employee.document_no")}),trigger:"blur"}],from:[{required:!0,message:n("validation.required",{attribute:n("common.from")}),trigger:"blur"}],to:[{required:!0,message:n("validation.required",{attribute:n("common.to")}),trigger:"blur"}]}),A=f(!1),G=()=>{r.value=`${n("common.add")} ${n("employee.work_agreement")}`,g.value=!0,a.value.id=null,a.value.ref=null,a.value.from=null,a.value.to=null,a.value.file=null},W=t=>{r.value=`${n("common.edit")} ${n("employee.work_agreement")}`,g.value=!0,a.value.id=t.id,a.value.ref=t.ref,a.value.from=t.from,a.value.to=t.to,a.value.file=t.file_name},z=()=>{g.value=!1,a.value.id=null,a.value.ref=null,a.value.from=null,a.value.to=null,a.value.file=null},H=async()=>{V.value&&V.value.validate(async t=>{if(t){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{A.value=!0;const m=a.value.id?`/agreement/${a.value.id}/update`:"/agreement/store";await j({method:"post",url:m,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),g.value=!1,F(),z(),v({message:n("message.success_save"),type:"success"})}catch{A.value=!1,v({message:n("message.error_server"),type:"error"})}o.close()}else v({message:n("message.error_input"),type:"error"})})},u=t=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/agreement/${t}/delete`).then(()=>{F(),v({type:"success",message:n("message.delete_success")})}).catch(o=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(t,o)=>{const m=oe,_=ce,T=_e,X=fe,Z=pe,x=ie,O=ve,Y=ge,$=be,h=we,w=De,Q=$e,b=ye,ee=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Oe,d(t.$t("employee.work_agreement",2)),1),e(m,{type:"primary",disabled:p(P),onClick:k(G,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${t.$t("common.add")} ${t.$t("employee.work_agreement")}`),1)]),_:1},8,["disabled"])],2),e(O,{loading:p(P),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(E)?{name:"default",fn:l(()=>[e(x,{class:"min-w-full",data:p(E),onSortChange:B},{default:l(()=>[e(_,{prop:"ref",label:t.$t("common.type"),sortable:""},{default:l(s=>[i(d(s.row.type??"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.valid_date"),sortable:""},{default:l(s=>[i(d(s.row.from?p(M)(s.row.from):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("common.to"),sortable:""},{default:l(s=>[i(d(s.row.to?p(M)(s.row.to):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(X,null,{default:l(()=>[e(T,{class:"flex justify-between",onClick:k(C=>W(s.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(t.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(T,{class:"flex justify-between",onClick:k(C=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(m,{type:"primary"},{default:l(()=>[i(d(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(ee,{id:"modalForm",modelValue:g.value,"onUpdate:modelValue":o[4]||(o[4]=s=>g.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(b,{"label-position":"top",ref_key:"formRef",ref:V,model:a.value,rules:y.value,onSubmit:k(H,["prevent"])},{default:l(()=>[e(Q,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.document_no"),prop:"ref"},{default:l(()=>[e(Y,{modelValue:a.value.ref,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.ref=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.from"),prop:"from"},{default:l(()=>[e(w,{modelValue:a.value.from,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.from=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.to"),prop:"to"},{default:l(()=>[e(w,{modelValue:a.value.to,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.to=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:a.value.file,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",Qe,[e(m,{onClick:k(z,["prevent"])},{default:l(()=>[i(d(t.$t("common.cancel")),1)]),_:1}),e(m,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(t.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Je={class:"font-semibold my-auto"},We={class:"text-end"},bl={__name:"Certification",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n}=re(),N=f({q:"",employeeId:D.employee}),I=async({queryKey:t})=>{const[o,m]=t;return(await j.get("/certification",{params:m})).data},{data:E,isLoading:P,isError:le,error:K,refetch:F}=de({queryKey:[`showEmployeeCertification-${D.employee}`,N.value],queryFn:I,keepPreviousData:!0});ue.debounce(()=>{N.value.page=1,F()},2e3);const B=()=>{F()},V=f(null),g=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,name:null,institution:null,level:null,issued_date:null,valid_date:null,file:null}),y=f({name:[{required:!0,message:n("validation.required",{attribute:n("common.name")}),trigger:"blur"}],institution:[{required:!0,message:n("validation.required",{attribute:n("employee.institution")}),trigger:"blur"}],level:[{required:!0,message:n("validation.required",{attribute:n("employee.level")}),trigger:"blur"}],issued_date:[{required:!0,message:n("validation.required",{attribute:n("employee.issued_date")}),trigger:"blur"}],valid_date:[{required:!0,message:n("validation.required",{attribute:n("employee.valid_date")}),trigger:"blur"}],file:[{required:!0,message:n("validation.required",{attribute:n("employee.document")}),trigger:"blur"}]}),A=f(!1),G=()=>{r.value=`${n("common.add")} ${n("employee.certification")}`,g.value=!0,a.value.id=null,a.value.institution=null,a.value.name=null,a.value.level=null,a.value.issued_date=null,a.value.valid_date=null,a.value.file=null},W=t=>{r.value=`${n("common.edit")} ${n("employee.certification")}`,g.value=!0,a.value.id=t.id,a.value.institution=t.institution,a.value.name=t.name,a.value.level=t.level,a.value.issued_date=t.issued_date,a.value.valid_date=t.valid_date,a.value.file=t.file_name},z=()=>{g.value=!1,a.value.id=null,a.value.institution=null,a.value.name=null,a.value.level=null,a.value.issued_date=null,a.value.valid_date=null,a.value.file=null},H=async()=>{V.value&&V.value.validate(async t=>{if(t){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{A.value=!0;const m=a.value.id?`/certification/${a.value.id}/update`:"/certification/store";await j({method:"post",url:m,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),g.value=!1,F(),z(),v({message:n("message.success_save"),type:"success"})}catch{A.value=!1,v({message:n("message.error_server"),type:"error"})}o.close()}else v({message:n("message.error_input"),type:"error"})})},u=t=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/certification/${t}/delete`).then(()=>{F(),v({type:"success",message:n("message.delete_success")})}).catch(o=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(t,o)=>{const m=oe,_=ce,T=_e,X=fe,Z=pe,x=ie,O=ve,Y=ge,$=be,h=we,w=De,Q=$e,b=ye,ee=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Je,d(t.$t("employee.certification",2)),1),e(m,{type:"primary",disabled:p(P),onClick:k(G,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${t.$t("common.add")} ${t.$t("employee.certification")}`),1)]),_:1},8,["disabled"])],2),e(O,{loading:p(P),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(E)?{name:"default",fn:l(()=>[p(E)?(J(),Ce(x,{key:0,class:"min-w-full",data:p(E),onSortChange:B},{default:l(()=>[e(_,{prop:"name",label:t.$t("common.name"),sortable:""},{default:l(s=>[i(d(s.row.name??"-"),1),o[7]||(o[7]=q("br",null,null,-1)),i(" "+d(s.row.institution??"-"),1)]),_:1},8,["label"]),e(_,{prop:"result",label:t.$t("employee.result"),sortable:""},{default:l(s=>[i(d(s.row.result??"-"),1)]),_:1},8,["label"]),e(_,{prop:"level",label:t.$t("employee.level"),sortable:""},null,8,["label"]),e(_,{label:t.$t("employee.issued_date"),sortable:""},{default:l(s=>[i(d(s.row.issued_date?p(M)(s.row.issued_date):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.valid_date"),sortable:""},{default:l(s=>[i(d(s.row.valid_date?p(M)(s.row.valid_date):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(X,null,{default:l(()=>[e(T,{class:"flex justify-between",onClick:k(C=>W(s.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(t.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(T,{class:"flex justify-between",onClick:k(C=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(m,{type:"primary"},{default:l(()=>[i(d(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):Ye("",!0)]),key:"0"}:void 0]),1032,["loading"]),e(ee,{id:"modalForm",modelValue:g.value,"onUpdate:modelValue":o[6]||(o[6]=s=>g.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(b,{"label-position":"top",ref_key:"formRef",ref:V,model:a.value,rules:y.value,onSubmit:k(H,["prevent"])},{default:l(()=>[e(Q,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e($,{label:t.$t("common.name"),prop:"name"},{default:l(()=>[e(Y,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.name=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(Y,{modelValue:a.value.institution,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.institution=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.level"),prop:"level"},{default:l(()=>[e(Y,{modelValue:a.value.level,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.level=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.issued_date"),prop:"issued_date"},{default:l(()=>[e(w,{modelValue:a.value.issued_date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.issued_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.valid_date"),prop:"valid_date"},{default:l(()=>[e(w,{modelValue:a.value.valid_date,"onUpdate:modelValue":o[4]||(o[4]=s=>a.value.valid_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:a.value.file,"onUpdate:modelValue":o[5]||(o[5]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",We,[e(m,{onClick:k(z,["prevent"])},{default:l(()=>[i(d(t.$t("common.cancel")),1)]),_:1}),e(m,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(t.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ge={class:"font-semibold my-auto"},He={key:1},Xe={class:"text-end"},gl={__name:"Insurance",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{objectToFormData:M}=me(),{t:c}=re(),n=f({q:"",employeeId:D.employee}),N=async({queryKey:u})=>{const[t,o]=u;return(await j.get("/insurance",{params:o})).data},{data:I,isLoading:E,isError:P,error:le,refetch:K}=de({queryKey:[`showEmployeeInsurance-${D.employee}`,n.value],queryFn:N,keepPreviousData:!0});ue.debounce(()=>{n.value.page=1,K()},2e3);const F=()=>{K()},B=f(null),V=f(!1),g=f(""),r=f({id:null,employee_id:D.employee,name:null,card_no:null,file:null}),a=f({name:[{required:!0,message:c("validation.required",{attribute:c("common.name")}),trigger:"blur"}],card_no:[{required:!0,message:c("validation.required",{attribute:c("employee.card_no")}),trigger:"blur"}],file:[{required:!0,message:c("validation.required",{attribute:c("employee.document")}),trigger:"change"}]}),y=f(!1),A=()=>{g.value=`${c("common.add")} ${c("employee.insurance")}`,V.value=!0,r.value.id=null,r.value.name=null,r.value.card_no=null,r.value.file=null},G=u=>{g.value=`${c("common.edit")} ${c("employee.insurance")}`,V.value=!0,r.value.id=u.id,r.value.name=u.name,r.value.card_no=u.card_no,r.value.file=u.file_name},W=()=>{V.value=!1,r.value.id=null,r.value.name=null,r.value.card_no=null,r.value.file=null},z=async()=>{B.value&&B.value.validate(async u=>{if(u){const t=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{y.value=!0;const o=r.value.id?`/insurance/${r.value.id}/update`:"/insurance/store";await j({method:"post",url:o,data:M(r.value),headers:{"Content-Type":"multipart/form-data"}}),V.value=!1,K(),W(),v({message:c("message.success_save"),type:"success"})}catch{y.value=!1,v({message:c("message.error_server"),type:"error"})}t.close()}else v({message:c("message.error_input"),type:"error"})})},H=u=>{he.confirm(c("message.delete_confirm"),c("message.delete_confirm_title"),{confirmButtonText:c("common.ok"),cancelButtonText:c("common.cancel"),type:"warning"}).then(()=>{j.delete(`/insurance/${u}/delete`).then(()=>{K(),v({type:"success",message:c("message.delete_success")})}).catch(t=>{v({type:"error",message:c("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:c("message.delete_cancel")})})};return(u,t)=>{const o=oe,m=ce,_=_e,T=fe,X=pe,Z=ie,x=ve,O=ge,Y=be,$=we,h=$e,w=ye,Q=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Ge,d(u.$t("employee.insurance",2)),1),e(o,{type:"primary",disabled:p(E),onClick:k(A,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${u.$t("common.add")} ${u.$t("employee.insurance")}`),1)]),_:1},8,["disabled"])],2),e(x,{loading:p(E),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(I)?{name:"default",fn:l(()=>[e(Z,{class:"min-w-full",data:p(I),onSortChange:F},{default:l(()=>[e(m,{prop:"name",label:u.$t("common.name"),sortable:""},{default:l(b=>[i(d(b.row.name??"-"),1)]),_:1},8,["label"]),e(m,{prop:"card_no",label:u.$t("employee.card_no"),sortable:""},{default:l(b=>[i(d(b.row.card_no??"-"),1)]),_:1},8,["label"]),e(m,{label:u.$t("employee.document")},{default:l(b=>[b.row.file_path?(J(),Ce(o,{key:0,tag:"a",target:"_blank",href:b.row.file_path},{default:l(()=>t[4]||(t[4]=[i(" Download File ")])),_:2},1032,["href"])):(J(),te("span",He,"-"))]),_:1},8,["label"]),e(m,{label:u.$t("common.action"),align:"center",width:"150"},{default:l(b=>[e(X,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(T,null,{default:l(()=>[e(_,{class:"flex justify-between",onClick:k(ee=>G(b.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(u.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(_,{class:"flex justify-between",onClick:k(ee=>H(b.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(u.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(o,{type:"primary"},{default:l(()=>[i(d(u.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(Q,{id:"modalForm",modelValue:V.value,"onUpdate:modelValue":t[3]||(t[3]=b=>V.value=b),title:g.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(w,{"label-position":"top",ref_key:"formRef",ref:B,model:r.value,rules:a.value,onSubmit:k(z,["prevent"])},{default:l(()=>[e(h,{gutter:20},{default:l(()=>[e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("common.name"),prop:"name"},{default:l(()=>[e(O,{modelValue:r.value.name,"onUpdate:modelValue":t[0]||(t[0]=b=>r.value.name=b),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:12},{default:l(()=>[e(Y,{label:u.$t("employee.card_no"),prop:"card_no"},{default:l(()=>[e(O,{modelValue:r.value.card_no,"onUpdate:modelValue":t[1]||(t[1]=b=>r.value.card_no=b),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e($,{md:24},{default:l(()=>[e(Y,{label:u.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:r.value.file,"onUpdate:modelValue":t[2]||(t[2]=b=>r.value.file=b)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",Xe,[e(o,{onClick:k(W,["prevent"])},{default:l(()=>[i(d(u.$t("common.cancel")),1)]),_:1}),e(o,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(u.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},Ze={class:"font-semibold my-auto"},xe={key:1},el={class:"text-end"},$l={__name:"Medical",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n}=re(),N=f({q:"",employeeId:D.employee}),I=async({queryKey:t})=>{const[o,m]=t;return(await j.get("/medical",{params:m})).data},{data:E,isLoading:P,isError:le,error:K,refetch:F}=de({queryKey:[`showEmployeeMedical-${D.employee}`,N.value],queryFn:I,keepPreviousData:!0});ue.debounce(()=>{N.value.page=1,F()},2e3);const B=()=>{F()},V=f(null),g=f(!1),r=f(""),a=f({id:null,employee_id:D.employee,institution:null,result:null,note:null,taken_date:null,valid_date:null,file:null}),y=f({institution:[{required:!0,message:n("validation.required",{attribute:n("employee.institution")}),trigger:"blur"}],result:[{required:!0,message:n("validation.required",{attribute:n("employee.result")}),trigger:"blur"}],taken_date:[{required:!0,message:n("validation.required",{attribute:n("employee.taken_date")}),trigger:"blur"}],valid_date:[{required:!0,message:n("validation.required",{attribute:n("employee.valid_date")}),trigger:"blur"}],note:[{required:!0,message:n("validation.required",{attribute:n("employee.note")}),trigger:"blur"}],file:[{required:!0,message:n("validation.required",{attribute:n("employee.document")}),trigger:"blur"}]}),A=f(!1),G=()=>{r.value=`${n("common.add")} ${n("employee.medical_checkup")}`,g.value=!0,a.value.id=null,a.value.institution=null,a.value.result=null,a.value.note=null,a.value.taken_date=null,a.value.valid_date=null,a.value.file=null},W=t=>{r.value=`${n("common.edit")} ${n("employee.medical_checkup")}`,g.value=!0,a.value.id=t.id,a.value.institution=t.institution,a.value.result=t.result,a.value.note=t.note,a.value.taken_date=t.taken_date,a.value.valid_date=t.valid_date,a.value.file=t.file_name},z=()=>{g.value=!1,a.value.id=null,a.value.institution=null,a.value.result=null,a.value.note=null,a.value.taken_date=null,a.value.valid_date=null,a.value.file=null},H=async()=>{V.value&&V.value.validate(async t=>{if(t){const o=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{A.value=!0;const m=a.value.id?`/medical/${a.value.id}/update`:"/medical/store";await j({method:"post",url:m,data:c(a.value),headers:{"Content-Type":"multipart/form-data"}}),g.value=!1,F(),z(),v({message:n("message.success_save"),type:"success"})}catch{A.value=!1,v({message:n("message.error_server"),type:"error"})}o.close()}else v({message:n("message.error_input"),type:"error"})})},u=t=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/medical/${t}/delete`).then(()=>{F(),v({type:"success",message:n("message.delete_success")})}).catch(o=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(t,o)=>{const m=oe,_=ce,T=_e,X=fe,Z=pe,x=ie,O=ve,Y=ge,$=be,h=we,w=De,Q=$e,b=ye,ee=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",Ze,d(t.$t("employee.medical_checkup",2)),1),e(m,{type:"primary",disabled:p(P),onClick:k(G,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${t.$t("common.add")} ${t.$t("employee.medical_checkup")}`),1)]),_:1},8,["disabled"])],2),e(O,{loading:p(P),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(E)?{name:"default",fn:l(()=>[e(x,{class:"min-w-full",data:p(E),onSortChange:B},{default:l(()=>[e(_,{prop:"institution",label:t.$t("employee.institution"),sortable:""},{default:l(s=>[i(d(s.row.institution??"-"),1)]),_:1},8,["label"]),e(_,{prop:"result",label:t.$t("employee.result"),sortable:""},{default:l(s=>[i(d(s.row.result??"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.taken_date"),sortable:""},{default:l(s=>[i(d(s.row.taken_date?p(M)(s.row.taken_date):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.valid_date"),sortable:""},{default:l(s=>[i(d(s.row.valid_date?p(M)(s.row.valid_date):"-"),1)]),_:1},8,["label"]),e(_,{label:t.$t("employee.document")},{default:l(s=>[s.row.file_path?(J(),Ce(m,{key:0,tag:"a",target:"_blank",href:s.row.file_path},{default:l(()=>o[7]||(o[7]=[i(" Download File ")])),_:2},1032,["href"])):(J(),te("span",xe,"-"))]),_:1},8,["label"]),e(_,{label:t.$t("common.action"),align:"center",width:"150"},{default:l(s=>[e(Z,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(X,null,{default:l(()=>[e(T,{class:"flex justify-between",onClick:k(C=>W(s.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(t.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(T,{class:"flex justify-between",onClick:k(C=>u(s.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(t.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(m,{type:"primary"},{default:l(()=>[i(d(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),key:"0"}:void 0]),1032,["loading"]),e(ee,{id:"modalForm",modelValue:g.value,"onUpdate:modelValue":o[6]||(o[6]=s=>g.value=s),title:r.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(b,{"label-position":"top",ref_key:"formRef",ref:V,model:a.value,rules:y.value,onSubmit:k(H,["prevent"])},{default:l(()=>[e(Q,{gutter:20},{default:l(()=>[e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.institution"),prop:"institution"},{default:l(()=>[e(Y,{modelValue:a.value.institution,"onUpdate:modelValue":o[0]||(o[0]=s=>a.value.institution=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.result"),prop:"result"},{default:l(()=>[e(Y,{modelValue:a.value.result,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value.result=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.taken_date"),prop:"taken_date"},{default:l(()=>[e(w,{modelValue:a.value.taken_date,"onUpdate:modelValue":o[2]||(o[2]=s=>a.value.taken_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:12},{default:l(()=>[e($,{label:t.$t("employee.valid_date"),prop:"valid_date"},{default:l(()=>[e(w,{modelValue:a.value.valid_date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.value.valid_date=s),class:"!w-full",format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:24},{default:l(()=>[e($,{label:t.$t("employee.note"),prop:"note"},{default:l(()=>[e(Y,{type:"textarea",rows:2,modelValue:a.value.note,"onUpdate:modelValue":o[4]||(o[4]=s=>a.value.note=s),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(h,{md:24},{default:l(()=>[e($,{label:t.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:a.value.file,"onUpdate:modelValue":o[5]||(o[5]=s=>a.value.file=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",el,[e(m,{onClick:k(z,["prevent"])},{default:l(()=>[i(d(t.$t("common.cancel")),1)]),_:1}),e(m,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(t.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}},ll={class:"font-semibold my-auto"},tl={class:"text-xs text-yellow-600"},al={class:"text-end"},wl={__name:"Attachment",props:{employee:{type:[String,Number],default:null},headerClass:{type:String,default:""}},setup(U){const D=U,{formatDate:M,objectToFormData:c}=me(),{t:n,te:N}=re(),I=f({q:"",employeeId:D.employee}),E=async({queryKey:o})=>{const[m,_]=o;return(await j.get("/attachment",{params:_})).data},{data:P,isLoading:le,isError:K,error:F,refetch:B}=de({queryKey:[`showEmployeeAttachment-${D.employee}`,I.value],queryFn:E,keepPreviousData:!0});ue.debounce(()=>{I.value.page=1,B()},2e3);const V=()=>{B()},g=f(null),r=f(!1),a=f(""),y=f({id:null,employee_id:D.employee,type:null,identity_number:null,valid_date:null,description:null,file:null}),A=f({type:[{required:!0,message:n("validation.required",{attribute:n("common.type")}),trigger:"blur"}],identity_number:[{required:!0,message:n("validation.required",{attribute:n("employee.identity_number")}),trigger:"blur"}],valid_date:[{required:!0,message:n("validation.required",{attribute:n("employee.valid_date")}),trigger:"blur"}],file:[{required:!0,message:n("validation.required",{attribute:n("employee.document")}),trigger:"change"}],description:[{required:!0,message:n("validation.required",{attribute:n("common.description")}),trigger:"blur"}]}),G=f(!1),W=()=>{a.value=`${n("common.add")} ${n("employee.attachment")}`,r.value=!0,y.value.id=null,y.value.type=null,y.value.identity_number=null,y.value.valid_date=null,y.value.description=null,y.value.file=null},z=o=>{a.value=`${n("common.edit")} ${n("employee.attachment")}`,r.value=!0,y.value.id=o.id,y.value.type=o.type,y.value.identity_number=o.identity_number,y.value.valid_date=o.valid_date,y.value.description=o.description,y.value.file=o.file_name},H=()=>{r.value=!1,y.value.id=null,y.value.type=null,y.value.identity_number=null,y.value.valid_date=null,y.value.description=null,y.value.file=null},u=async()=>{g.value&&g.value.validate(async o=>{if(o){const m=Ve.service({customClass:"rounded-md",target:document.querySelector("#modalForm")});try{G.value=!0;const _=y.value.id?`/attachment/${y.value.id}/update`:"/attachment/store";await j({method:"post",url:_,data:c(y.value),headers:{"Content-Type":"multipart/form-data"}}),r.value=!1,B(),H(),v({message:n("message.success_save"),type:"success"})}catch{G.value=!1,v({message:n("message.error_server"),type:"error"})}m.close()}else v({message:n("message.error_input"),type:"error"})})},t=o=>{he.confirm(n("message.delete_confirm"),n("message.delete_confirm_title"),{confirmButtonText:n("common.ok"),cancelButtonText:n("common.cancel"),type:"warning"}).then(()=>{j.delete(`/attachment/${o}/delete`).then(()=>{B(),v({type:"success",message:n("message.delete_success")})}).catch(m=>{v({type:"error",message:n("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:n("message.delete_cancel")})})};return(o,m)=>{const _=oe,T=ce,X=_e,Z=fe,x=pe,O=ie,Y=ve,$=Fe,h=Se,w=be,Q=we,b=ge,ee=De,s=$e,C=ye,S=ke;return J(),te("div",null,[q("div",{class:ae(["flex items-center align-middle justify-between mb-2 py-2",U.headerClass])},[q("div",ll,d(o.$t("employee.attachment",2)),1),e(_,{type:"primary",disabled:p(le),onClick:k(W,["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:add-line",class:"me-2"}),i(" "+d(`${o.$t("common.add")} ${o.$t("employee.attachment")}`),1)]),_:1},8,["disabled"])],2),e(Y,{loading:p(le),animated:""},ne({template:l(()=>[e(se,{rows:5})]),_:2},[p(P)?{name:"default",fn:l(()=>[p(P)?(J(),Ce(O,{key:0,class:"min-w-full",data:p(P),onSortChange:V},{default:l(()=>[e(T,{prop:"type",label:o.$t("common.type"),sortable:""},{default:l(L=>[q("div",null,d(o.$te(`employee.${L.row.type}`)?o.$t(`employee.${L.row.type}`):L.row.type),1),q("div",null,d(L.row.identity_number??"-"),1)]),_:1},8,["label"]),e(T,{prop:"valid_date",label:o.$t("employee.valid_date"),sortable:""},{default:l(L=>[i(d(L.row.valid_date?p(M)(L.row.valid_date):"-"),1)]),_:1},8,["label"]),e(T,{prop:"document",label:o.$t("employee.document"),sortable:""},{default:l(L=>[e(_,{tag:"a",target:"_blank",href:L.row.file_path},{default:l(()=>m[6]||(m[6]=[i(" Download File ")])),_:2},1032,["href"])]),_:1},8,["label"]),e(T,{label:o.$t("common.action"),align:"center",width:"150"},{default:l(L=>[e(x,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(Z,null,{default:l(()=>[e(X,{class:"flex justify-between",onClick:k(Ue=>z(L.row),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:edit-line",class:"me-2"}),i(" "+d(o.$t("common.edit")),1)]),_:2},1032,["onClick"]),e(X,{class:"flex justify-between",onClick:k(Ue=>t(L.row.id),["prevent"])},{default:l(()=>[e(p(R),{icon:"mingcute:delete-2-line",class:"me-2"}),i(" "+d(o.$t("common.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:l(()=>[e(_,{type:"primary"},{default:l(()=>[i(d(o.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])):Ye("",!0)]),key:"0"}:void 0]),1032,["loading"]),e(S,{id:"modalForm",modelValue:r.value,"onUpdate:modelValue":m[5]||(m[5]=L=>r.value=L),title:a.value,class:"!sm:w-full !md:w-[700px] rounded-lg","close-on-click-modal":!1,"close-on-press-escape":!1},{default:l(()=>[e(C,{"label-position":"top",ref_key:"formRef",ref:g,model:y.value,rules:A.value,onSubmit:k(u,["prevent"])},{default:l(()=>[e(s,{gutter:20},{default:l(()=>[e(Q,{md:12},{default:l(()=>[e(w,{label:o.$t("common.type"),prop:"type"},{default:l(()=>[e(h,{modelValue:y.value.type,"onUpdate:modelValue":m[0]||(m[0]=L=>y.value.type=L),filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:o.$t("common.select"),class:"w-full"},{default:l(()=>[e($,{label:o.$t("employee.id_card"),value:"id_card"},null,8,["label"]),e($,{label:o.$t("employee.passport"),value:"passport"},null,8,["label"]),e($,{label:o.$t("employee.tax_id"),value:"tax_id"},null,8,["label"]),e($,{label:o.$t("employee.driving_license"),value:"driving_license"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),q("div",tl,d(o.$t("employee.attachment_note")),1)]),_:1},8,["label"])]),_:1}),e(Q,{md:12},{default:l(()=>[e(w,{label:o.$t("employee.identity_number"),prop:"identity_number"},{default:l(()=>[e(b,{modelValue:y.value.identity_number,"onUpdate:modelValue":m[1]||(m[1]=L=>y.value.identity_number=L),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(Q,{md:12},{default:l(()=>[e(w,{label:o.$t("employee.valid_date"),prop:"valid_date"},{default:l(()=>[e(ee,{modelValue:y.value.valid_date,"onUpdate:modelValue":m[2]||(m[2]=L=>y.value.valid_date=L),format:"DD-MM-YYYY","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(Q,{md:12},{default:l(()=>[e(w,{label:o.$t("employee.document"),prop:"file"},{default:l(()=>[e(qe,{modelValue:y.value.file,"onUpdate:modelValue":m[3]||(m[3]=L=>y.value.file=L)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(Q,{md:24},{default:l(()=>[e(w,{label:o.$t("common.description"),prop:"description"},{default:l(()=>[e(b,{type:"textarea",modelValue:y.value.description,"onUpdate:modelValue":m[4]||(m[4]=L=>y.value.description=L),rows:3},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),q("div",al,[e(_,{onClick:k(H,["prevent"])},{default:l(()=>[i(d(o.$t("common.cancel")),1)]),_:1}),e(_,{type:"primary","native-type":"submit"},{default:l(()=>[i(d(o.$t("common.save")),1)]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{pl as _,fl as a,_l as b,vl as c,yl as d,bl as e,gl as f,$l as g,wl as h};
