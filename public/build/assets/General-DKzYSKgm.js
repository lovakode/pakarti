import{r as _,w as $,M as y,o as V,O as o,c as k,V as U,ai as S,a as D,U as h,q as F,P as I,W as l,$ as O,T as j}from"./@vue-BedgDXZT.js";import{d as z}from"./dayjs-BmnIqbSg.js";import{x as w,w as C,v as q,f as x,m as G,g as J,h as P,n as R,o as W,k as Z,p as L}from"./element-plus-B3W2dA5h.js";import{a as B}from"./axios-D8rVyQy1.js";import{d as K,u as Q,c as b}from"./app-DQL-JUcq.js";import{u as X}from"./vue-i18n-3uPOuKlG.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-DHhqOHwO.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";import"./pinia-BVe78Fnf.js";import"./vue-router-CFFWa3Rv.js";import"./js-cookie-Cz0CWeBA.js";import"./@iconify-BzSLy_Lz.js";import"./@casl-Dl6lt6vV.js";import"./@ucast-BiZkLRnB.js";import"./@vueuse-_BfsD77n.js";import"./chart.js-B8s4pPcf.js";import"./vue-advanced-cropper-C5NvVQmq.js";import"./@tanstack-D5MgbqGz.js";import"./vue3-blocks-tree-BkKvaGx5.js";import"./vue-BcxTvRm9.js";import"./@unhead-BU3UxbPv.js";import"./unhead-M3i9Ttrl.js";import"./hookable-B8xFkYCm.js";import"./@intlify-ChVUvfmF.js";const ee={class:"float-left"},le={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},ae={__name:"SelectDateFormat",props:{modelValue:[String,Number],placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:p}){const i=c,s=p,f=_({"d-m-Y":"DD-MM-YYYY","m-d-Y":"MM-DD-YYYY","Y-m-d":"YYYY-MM-DD","d.m.Y":"DD.MM.YYYY","m.d.Y":"MM.DD.YYYY","Y.m.d":"YYYY.MM.DD","d/m/Y":"DD/MM/YYYY","m/d/Y":"MM/DD/YYYY","Y/m/d":"YYYY/MM/DD","d/M/Y":"DD/MMM/YYYY","d.M.Y":"DD.MMM.YYYY","d-M-Y":"DD-MMM-YYYY","d M Y":"DD MMM YYYY","d F, Y":"DD MMMM, YYYY","D/M/Y":"ddd/MMM/YYYY","D.M.Y":"ddd.MMM.YYYY","D-M-Y":"ddd-MMM-YYYY","D M Y":"ddd MMM YYYY","d D M Y":"DD ddd MMM YYYY","D d M Y":"ddd DD MMM YYYY","dS M Y":"Do MMM YYYY"}),d=_(i.modelValue),e=_(!1),M=n=>z().format(n);$(()=>i.modelValue,n=>{d.value=n});const g=n=>{s("update:modelValue",n)};return(n,v)=>{const a=w,t=C;return V(),y(t,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=m=>d.value=m),"value-key":"id",filterable:"",clearable:"",remote:"",onChange:g,autocomplete:"off",loading:e.value,placeholder:c.placeholder},{default:o(()=>[(V(!0),k(U,null,S(f.value,(m,r)=>(V(),y(a,{key:r,label:m,value:r},{default:o(()=>[D("span",ee,h(m),1),D("span",le,h(M(m)),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])}}},te={class:"float-left"},oe={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},ne={__name:"SelectTimeFormat",props:{modelValue:String,placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:p}){const i=c,s=p,f=_([{time:12,format:"hh:mm A"},{time:12,format:"hh:mm a"},{time:12,format:"hh:mm:ss A"},{time:12,format:"hh:mm::ss a"},{time:24,format:"HH:mm"},{time:24,format:"HH:mm:ss"}]),d=_(i.modelValue),e=_(!1),M=n=>z().format(n);$(()=>i.modelValue,n=>{d.value=n});const g=n=>{s("update:modelValue",n)};return(n,v)=>{const a=w,t=C;return V(),y(t,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=m=>d.value=m),"value-key":"format",filterable:"",clearable:"",remote:"",onChange:g,autocomplete:"off",loading:e.value,placeholder:c.placeholder},{default:o(()=>[(V(!0),k(U,null,S(f.value,(m,r)=>(V(),y(a,{key:r,label:n.$t("common.hours_select",{time:m.time,format:m.format}),value:m.format},{default:o(()=>[D("span",te,h(n.$t("common.hours_select",{time:m.time,format:m.format})),1),D("span",oe,h(M(m.format)),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading","placeholder"])}}},me={__name:"SelectTimeZone",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(c,{emit:p}){const i=p,s=c,f=_([]),d=_(s.modelValue),e=_(!1);$(()=>s.modelValue,n=>{d.value=n});const M=async()=>{try{e.value=!0;const n=await B.get("/base/timezone");n.status===200&&(f.value=n.data),e.value=!1}catch{}};F(()=>{M()});const g=n=>{d.value=n,i("update:modelValue",n)};return(n,v)=>{const a=w,t=C;return V(),y(t,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=m=>d.value=m),"value-key":"id",class:"w-100",filterable:"",clearable:"",remote:"",onChange:g,autocomplete:"off",loading:e.value},{default:o(()=>[(V(!0),k(U,null,S(f.value,(m,r)=>(V(),y(a,{key:r,label:m,value:m},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}},ue={__name:"SelectLocale",props:{modelValue:{type:[String,Number],default:""}},emits:["update:modelValue"],setup(c,{emit:p}){const i=p,s=c,f=_([]),d=_(s.modelValue),e=_(!1);$(()=>s.modelValue,n=>{d.value=n});const M=async()=>{try{e.value=!0;const n=await B.get("/settings/language");n.status===200&&(f.value=n.data),e.value=!1}catch{}};F(()=>{M()});const g=n=>{d.value=n,i("update:modelValue",n)};return(n,v)=>{const a=w,t=C;return V(),y(t,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=m=>d.value=m),"value-key":"code",class:"w-100",filterable:"",clearable:"",remote:"",onChange:g,autocomplete:"off",loading:e.value},{default:o(()=>[(V(!0),k(U,null,S(f.value,m=>(V(),y(a,{key:m.code,label:m.name,value:m.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}};function se(c){const p=new FormData;for(const i in c){const s=c[i];s===null||s==="null"?p.append(i,null):Array.isArray(s)?s.forEach((f,d)=>{p.append(`${i}[${d}]`,f)}):s instanceof File?p.append(i,s):typeof s=="object"&&s!==null?p.append(i,JSON.stringify(s)):s!==void 0&&p.append(i,s)}return p}const de={class:"text-right"},Ae={__name:"General",props:{title:{type:String,default:""}},emits:["childinit"],setup(c,{emit:p}){const i=K(),{t:s}=X(),{setTitle:f}=Q(),d=p,e=_({app_name:null,company_name:null,company_email:null,company_phone:null,company_address:null,logo_light:null,logo_dark:null,logo_light_sm:null,logo_dark_sm:null,timezone:null,date_format:"d-m-Y",time_format:"HH:mm",locale:null}),M=_({}),g=_(!1),n=async()=>{g.value=!0;const a="/settings/general/update";try{const t=se(e.value),m=await axios.post(a,t,{headers:{"Content-Type":"multipart/form-data"}});i.reinitApp(),L({message:s("success_msg"),type:"success"})}catch(t){M.value=t.validation,L({message:s("message.error_server"),type:"error"})}finally{g.value=!1}},v=async()=>{try{M.value={},g.value=!0;const a=await axios.get("/settings/general");a.status===200&&(e.value.app_name=a.data.app_name,e.value.company_name=a.data.company_name,e.value.company_email=a.data.company_email,e.value.company_phone=a.data.company_phone,e.value.company_address=a.data.company_address,e.value.logo_light=a.data.logo_light,e.value.logo_dark=a.data.logo_dark,e.value.logo_light_sm=a.data.logo_light_sm,e.value.logo_dark_sm=a.data.logo_dark_sm,e.value.time_format=a.data.time_format,e.value.date_format=a.data.date_format,e.value.timezone=a.data.timezone,e.value.locale=a.data.locale,e.value.favicon=a.data.favicon)}catch(a){console.error(a)}finally{g.value=!1}};return F(()=>{f(s("base.general_setting",2)),d("childinit","general_setting"),v()}),(a,t)=>{const m=W,r=R,Y=P,E=J,H=Z,T=G,A=x,N=q;return I((V(),y(A,{class:"shadow-sm sm:rounded-lg"},{default:o(()=>[l(T,{model:e.value,onSubmit:O(n,["prevent"]),"label-position":"top"},{default:o(()=>[l(E,{gutter:20},{default:o(()=>[l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.app_name"),prop:"app_name"},{default:o(()=>[l(m,{modelValue:e.value.app_name,"onUpdate:modelValue":t[0]||(t[0]=u=>e.value.app_name=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.company_name"),prop:"company_name"},{default:o(()=>[l(m,{modelValue:e.value.company_name,"onUpdate:modelValue":t[1]||(t[1]=u=>e.value.company_name=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.company_email"),prop:"company_email"},{default:o(()=>[l(m,{modelValue:e.value.company_email,"onUpdate:modelValue":t[2]||(t[2]=u=>e.value.company_email=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.company_phone"),prop:"company_phone"},{default:o(()=>[l(m,{modelValue:e.value.company_phone,"onUpdate:modelValue":t[3]||(t[3]=u=>e.value.company_phone=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(r,{label:a.$t("setting.company_address")},{default:o(()=>[l(m,{type:"textarea",modelValue:e.value.company_address,"onUpdate:modelValue":t[4]||(t[4]=u=>e.value.company_address=u)},null,8,["modelValue"])]),_:1},8,["label"]),l(E,{gutter:20},{default:o(()=>[l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.date_format")},{default:o(()=>[l(ae,{modelValue:e.value.date_format,"onUpdate:modelValue":t[5]||(t[5]=u=>e.value.date_format=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.time_format")},{default:o(()=>[l(ne,{modelValue:e.value.time_format,"onUpdate:modelValue":t[6]||(t[6]=u=>e.value.time_format=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.timezone")},{default:o(()=>[l(me,{modelValue:e.value.timezone,"onUpdate:modelValue":t[7]||(t[7]=u=>e.value.timezone=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.default_language")},{default:o(()=>[l(ue,{modelValue:e.value.locale,"onUpdate:modelValue":t[8]||(t[8]=u=>e.value.locale=u)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(E,{gutter:20},{default:o(()=>[l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.logo_light")},{default:o(()=>[l(b,{modelValue:e.value.logo_light,"onUpdate:modelValue":t[9]||(t[9]=u=>e.value.logo_light=u),class:"!h-20 !w-96",cropper:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:12},{default:o(()=>[l(r,{label:a.$t("setting.logo_dark")},{default:o(()=>[l(b,{modelValue:e.value.logo_dark,"onUpdate:modelValue":t[10]||(t[10]=u=>e.value.logo_dark=u),class:"!h-20 !w-96",cropper:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:8},{default:o(()=>[l(r,{label:a.$t("setting.logo_light_sm")},{default:o(()=>[l(b,{modelValue:e.value.logo_light_sm,"onUpdate:modelValue":t[11]||(t[11]=u=>e.value.logo_light_sm=u),cropper:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:8},{default:o(()=>[l(r,{label:a.$t("setting.logo_dark_sm")},{default:o(()=>[l(b,{modelValue:e.value.logo_dark_sm,"onUpdate:modelValue":t[12]||(t[12]=u=>e.value.logo_dark_sm=u),cropper:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(Y,{md:8},{default:o(()=>[l(r,{label:a.$t("setting.favicon")},{default:o(()=>[l(b,{modelValue:e.value.favicon,"onUpdate:modelValue":t[13]||(t[13]=u=>e.value.favicon=u),cropper:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),D("div",de,[l(H,{"native-type":"submit",type:"primary"},{default:o(()=>[j(h(a.$t("common.save")),1)]),_:1})])]),_:1},8,["model"])]),_:1})),[[N,g.value]])}}};export{Ae as default};
