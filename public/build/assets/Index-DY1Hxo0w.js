import{q as Z,r as q,c as M,a as r,V as e,X as m,T as l,al as x,o as g,aa as d,u as s,S as j,P as V,W as k,a0 as ee,ak as le}from"./@vue-R74GAGRy.js";import{a as P}from"./axios-D8rVyQy1.js";import{I as v}from"./@iconify-B_FrOzP8.js";import{_ as te}from"./lodash-BJPsjdUP.js";import{_ as ae}from"./SkeletonTable-BlkTH-8E.js";import{u as oe}from"./@tanstack-CrM5e4XN.js";import{u as ne}from"./vue-i18n-ZNZ64Gzf.js";import{u as se}from"./app-DkR6lKKd.js";import{_ as me,a as re}from"./SelectJobPosition-CGeEb4W4.js";import{_ as de}from"./SelectDepartment-DgrX5KRk.js";import{_ as ie}from"./SelectEmployee-CkoOof3v.js";import{u as ue}from"./@casl-B-uYYHKL.js";import{i as pe,f as ce,j as _e,s as fe,t as be,k as ve,m as ge,g as we,h as ye,n as $e,o as Ve,u as ke,q as he,r as Ee,w as Ce,x as je,a as Be,b as Ie,c as Se,y as Te,z as Ue,p as B}from"./element-plus-m-0apcFn.js";import"./@intlify-ChVUvfmF.js";import"./pinia-AHalXmfd.js";import"./vue-router-LsEmCaCE.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-B1uMN4GC.js";import"./chart.js-B8s4pPcf.js";import"./vue-advanced-cropper-Cc488Mck.js";import"./dayjs-9DF7GWnL.js";import"./vue3-blocks-tree-BH4O2Ayn.js";import"./vue-BaDTWQb3.js";import"./@unhead-Br2qtGVU.js";import"./unhead-DeLy1NBI.js";import"./hookable-B8xFkYCm.js";import"./@ucast-BiZkLRnB.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-BklxBE5D.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";const De={class:"content"},qe={class:"content-header"},Me={class:"mt-auto mb-0"},Pe={class:"text-lg font-semibold"},ze={class:"mt-auto mb-0"},Fe={class:"flex justify-between items-center p-4"},Ne={class:"flex items-center gap-2"},Le={key:0,class:"card-filter p-4"},Ae={class:"flex items-center gap-2"},He={class:"flex"},Ke={class:"my-auto"},Oe={class:""},Qe={class:"font-semibold"},Re={class:"text-sm"},We={class:"flex justify-between items-center p-4"},Xe={class:"flex items-center gap-2"},Ge={class:"flex items-center gap-2"},Dl={__name:"Index",setup(Je){const{t:i}=ne(),{can:h}=ue(),{setTitle:z}=se();Z(()=>{z(i("base.employee",2))});const w=q(!1),o=q({limit:25,page:1,q:"",name:null,code:null,status:null,dept:null,pst:null,superior:null}),F=()=>{o.value.name=null,o.value.code=null,o.value.status=null,o.value.dept=null,o.value.pst=null,o.value.superior=null,f()},I=async({queryKey:a})=>{const[n,y]=a;return(await P.get("/employee",{params:y})).data},{data:p,isLoading:E,isError:Ye,error:Ze,refetch:f}=oe({queryKey:["customerList",o.value],queryFn:I,keepPreviousData:!0});te.debounce(()=>{o.value.page=1,f()},1e3);const N=()=>{f()},L=a=>{o.value.page=a,f()},A=a=>{Ue.confirm(i("message.delete_confirm"),i("message.delete_confirm_title"),{confirmButtonText:i("common.ok"),cancelButtonText:i("common.cancel"),type:"warning"}).then(()=>{P.delete(`/employee/${a}/delete`).then(()=>{I(),B({type:"success",message:i("message.delete_success")})}).catch(n=>{B({type:"error",message:i("message.delete_cancel")})})}).catch(()=>{B({type:"info",message:i("message.delete_cancel")})})};return(a,n)=>{const y=_e,S=pe,u=be,T=fe,$=ve,U=Ve,c=$e,_=ye,H=we,K=ge,O=Ce,b=Ee,Q=je,D=x("router-link"),C=Se,R=Ie,W=Be,X=he,G=Te,J=ke,Y=ce;return g(),M("div",De,[r("div",qe,[r("div",Me,[r("div",Pe,m(a.$t("base.employee",2)),1)]),r("div",ze,[e(S,{separator:"/"},{default:l(()=>[e(y,{to:{path:"/"}},{default:l(()=>[d(m(a.$t("base.dashboard")),1)]),_:1}),e(y,null,{default:l(()=>[d(m(a.$t("base.employee",2)),1)]),_:1})]),_:1})])]),e(Y,{"body-class":"!p-0",class:"!rounded-lg !shadow-md"},{default:l(()=>[r("div",Fe,[e(T,{modelValue:o.value.limit,"onUpdate:modelValue":n[0]||(n[0]=t=>o.value.limit=t),placeholder:a.$t("common.select"),disabled:s(E),class:"w-20",onChange:n[1]||(n[1]=t=>s(f)())},{default:l(()=>[e(u,{label:"25",value:"25"}),e(u,{label:"50",value:"50"}),e(u,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","disabled"]),r("div",Ne,[e($,{type:"primary",disabled:s(E),onClick:n[2]||(n[2]=k(t=>w.value=!w.value,["prevent"])),plain:w.value},{default:l(()=>[e(s(v),{icon:"fluent:filter-24-filled",class:"me-2"}),d(" "+m(a.$t("common.filter")),1)]),_:1},8,["disabled","plain"]),s(h)("create","employee")?(g(),j($,{key:0,tag:"router-link",type:"primary",to:"/employee/create"},{default:l(()=>[e(s(v),{icon:"mingcute:add-line",class:"me-2"}),d(" "+m(`${a.$t("common.add")} ${a.$t("base.employee")}`),1)]),_:1})):V("",!0)])]),e(ee,{name:"slide-down"},{default:l(()=>[w.value?(g(),M("div",Le,[e(K,{"label-position":"top",onSubmit:k(s(f),["prevent"])},{default:l(()=>[e(H,{gutter:20},{default:l(()=>[e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("common.code")},{default:l(()=>[e(U,{modelValue:o.value.code,"onUpdate:modelValue":n[3]||(n[3]=t=>o.value.code=t),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("common.name")},{default:l(()=>[e(U,{modelValue:o.value.name,"onUpdate:modelValue":n[4]||(n[4]=t=>o.value.name=t),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("common.status")},{default:l(()=>[e(T,{modelValue:o.value.status,"onUpdate:modelValue":n[5]||(n[5]=t=>o.value.status=t),clearable:""},{default:l(()=>[e(u,{value:"permanent",label:a.$t("employee.permanent")},null,8,["label"]),e(u,{value:"contract",label:a.$t("employee.contract")},null,8,["label"]),e(u,{value:"resigned",label:a.$t("employee.resigned")},null,8,["label"]),e(u,{value:"retired",label:a.$t("employee.retired")},null,8,["label"]),e(u,{value:"passed_away",label:a.$t("employee.passed_away")},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("base.department")},{default:l(()=>[e(de,{modelValue:o.value.dept,"onUpdate:modelValue":n[6]||(n[6]=t=>o.value.dept=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("base.job_position")},{default:l(()=>[e(me,{modelValue:o.value.pst,"onUpdate:modelValue":n[7]||(n[7]=t=>o.value.pst=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("base.grade")},{default:l(()=>[e(re,{modelValue:o.value.grade,"onUpdate:modelValue":n[8]||(n[8]=t=>o.value.grade=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(_,{md:6},{default:l(()=>[e(c,{label:a.$t("employee.superior")},{default:l(()=>[e(ie,{modelValue:o.value.superior,"onUpdate:modelValue":n[9]||(n[9]=t=>o.value.superior=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),r("div",Ae,[e($,{type:"primary",onClick:k(F,["prevent"])},{default:l(()=>[e(s(v),{icon:"fluent:arrow-clockwise-24-regular",class:"me-2"}),d(" "+m(a.$t("common.reset")),1)]),_:1})])]),_:1},8,["onSubmit"])])):V("",!0)]),_:1}),e(J,{loading:s(E),animated:""},le({template:l(()=>[e(ae,{rows:15})]),_:2},[s(p)?{name:"default",fn:l(()=>[e(X,{class:"!w-full","scrollbar-always-on":"",data:s(p).data,onSortChange:N},{default:l(()=>[e(b,{prop:"name",label:a.$t("common.name")},{default:l(t=>[r("div",He,[e(O,{class:"!w-10 !h-10 rounded-md me-2",src:t.row.image_path,"preview-src-list":[t.row.image_path],"initial-index":0,"preview-teleported":""},null,8,["src","preview-src-list"]),r("div",Ke,[r("div",Oe,m(t.row.code??"-"),1),r("div",Qe,m(t.row.name),1)])])]),_:1},8,["label"]),e(b,{label:a.$t("employee.gender"),sortable:"",width:"110"},{default:l(t=>[d(m(t.row.gender?a.$t(`employee.${t.row.gender}`):"-"),1)]),_:1},8,["label"]),e(b,{label:a.$t("base.job_position"),width:"200",sortable:""},{default:l(t=>[r("div",null,m(t.row.department?t.row.department.name:"-"),1),r("div",Re,[d(m(t.row.job_position?t.row.job_position.name:"-")+" ",1),e(Q,{size:"small"},{default:l(()=>[d(m(t.row.grade?t.row.grade.name:"-"),1)]),_:2},1024)])]),_:1},8,["label"]),e(b,{prep:"ptkp",label:a.$t("employee.ptkp"),sortable:"",width:"90"},{default:l(t=>[d(m(t.row.ptkp??"-"),1)]),_:1},8,["label"]),e(b,{prep:"status",label:a.$t("common.status"),sortable:"",width:"140"},{default:l(t=>[d(m(t.row.status?a.$t(`employee.${t.row.status}`):"-"),1)]),_:1},8,["label"]),e(b,{label:a.$t("common.action"),align:"center",width:"120"},{default:l(t=>[e(W,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:l(()=>[e(R,null,{default:l(()=>[e(C,{class:"w-full"},{default:l(()=>[e(D,{to:`/employee/${t.row.id}`,class:"flex justify-between"},{default:l(()=>[e(s(v),{icon:"mingcute:eye-line",class:"me-2"}),d(" "+m(a.$t("common.view")),1)]),_:2},1032,["to"])]),_:2},1024),s(h)("update","employee")?(g(),j(C,{key:0,class:"w-full"},{default:l(()=>[e(D,{to:`/employee/${t.row.id}/edit`,class:"flex justify-between"},{default:l(()=>[e(s(v),{icon:"mingcute:edit-line",class:"me-2"}),d(" "+m(a.$t("common.edit")),1)]),_:2},1032,["to"])]),_:2},1024)):V("",!0),s(h)("delete","employee")?(g(),j(C,{key:1,class:"flex justify-between",onClick:k(xe=>A(t.row.id),["prevent"])},{default:l(()=>[e(s(v),{icon:"mingcute:delete-2-line",class:"me-2"}),d(" "+m(a.$t("common.delete")),1)]),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)]),default:l(()=>[e($,{type:"primary"},{default:l(()=>[d(m(a.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"]),r("div",We,[r("div",Xe,[r("span",null,m(a.$t("common.table_paginate",{from:s(p).from,to:s(p).to,total:s(p).total})),1)]),r("div",Ge,[e(G,{class:"float-end",background:"",layout:"prev, pager, next","page-size":s(p).per_page,total:s(p).total,"current-page":o.value.page,onCurrentChange:L},null,8,["page-size","total","current-page"])])])]),key:"0"}:void 0]),1032,["loading"])]),_:1})])}}};export{Dl as default};
