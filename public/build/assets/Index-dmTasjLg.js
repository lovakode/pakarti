import{r as $,a1 as M,q as N,c as L,a as n,V as e,X as l,T as a,al as P,o as b,aa as c,_ as U,u as p,S as E,P as O,W}from"./@vue-R74GAGRy.js";import{I as u}from"./@iconify-B_FrOzP8.js";import{_ as X}from"./lodash-BJPsjdUP.js";import{u as A}from"./vue-i18n-ZNZ64Gzf.js";import{i as F,f as G,j as H,s as J,t as K,o as Q,k as R,q as Y,r as Z,a as ee,b as te,c as oe,v as ae,y as se,z as ne,p as v}from"./element-plus-m-0apcFn.js";import"./@intlify-ChVUvfmF.js";import"./dayjs-9DF7GWnL.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-BklxBE5D.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";const le={class:"content"},re={class:"content-header"},ie={class:"content-title"},ce={class:"md:flex hidden items-center gap-2.5 text-sm font-semibold"},me={class:"flex justify-between items-center p-4"},de={class:"flex items-center gap-2"},pe={class:"flex justify-between items-center p-4"},ue={class:"flex items-center gap-2"},_e={class:"flex items-center gap-2"},De={__name:"Index",setup(fe){const{t:i}=A(),m=$(!1),h=$([]),s=M({page:1,limit:25,from:0,to:0,total:0,pageSize:0,q:null}),k=X.debounce(()=>{m.value=!0,d()},1e3),d=async(t=1)=>{try{m.value=!0;const o=await axios.get("/settings/permissions",{params:{...s,page:t}});o.status===200&&(h.value=o.data.data,s.from=o.data.from,s.to=o.data.to,s.page=o.data.current_page,s.total=o.data.total,s.pageSize=o.data.per_page),m.value=!1}catch(o){console.error(o),m.value=!1}};N(()=>{d()});const V=t=>{ne.confirm(i("message.delete_confirm"),i("message.delete_confirm_title"),{confirmButtonText:i("common.ok"),cancelButtonText:i("common.cancel"),type:"warning"}).then(()=>{axios.delete(`/settings/permissions/${t}/delete`).then(()=>{d(),v({type:"success",message:i("message.delete_success")})}).catch(o=>{v({type:"error",message:i("message.delete_cancel")})})}).catch(()=>{v({type:"info",message:i("message.delete_cancel")})})};return(t,o)=>{const _=H,B=F,f=K,C=J,x=Q,w=R,g=Z,I=P("router-link"),y=oe,D=te,S=ee,j=Y,z=se,T=G,q=ae;return b(),L("div",le,[n("div",re,[n("h2",ie,l(t.$t("base.role_permission")),1),n("div",ce,[e(B,{separator:"/"},{default:a(()=>[e(_,{to:{path:"/"}},{default:a(()=>[c(l(t.$t("base.dashboard")),1)]),_:1}),e(_,{to:{path:"/settings"}},{default:a(()=>[c(l(t.$t("base.settings")),1)]),_:1}),e(_,null,{default:a(()=>[c(l(t.$t("base.role_permission")),1)]),_:1})]),_:1})])]),e(T,{"body-class":"!p-0",class:"!rounded-lg !shadow-md"},{default:a(()=>[n("div",me,[e(C,{modelValue:s.limit,"onUpdate:modelValue":o[0]||(o[0]=r=>s.limit=r),placeholder:t.$t("common.select"),class:"w-20",onChange:o[1]||(o[1]=r=>d(1))},{default:a(()=>[e(f,{label:"25",value:"25"}),e(f,{label:"50",value:"50"}),e(f,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder"]),n("div",de,[e(x,{modelValue:s.q,"onUpdate:modelValue":o[2]||(o[2]=r=>s.q=r),onInput:p(k),clearable:""},{prefix:a(()=>[e(p(u),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput"]),e(w,{to:"/settings/permission/create",tag:"router-link",type:"primary"},{default:a(()=>[e(p(u),{icon:"mingcute:add-line",class:"me-2"}),c(" "+l(t.$t("common.create")),1)]),_:1})])]),U((b(),E(j,{class:"min-w-full",data:h.value},{default:a(()=>[e(g,{prop:"name",label:t.$t("common.name"),sortable:""},null,8,["label"]),e(g,{prop:"users_count",label:t.$t("base.user"),sortable:""},null,8,["label"]),e(g,{label:t.$t("common.action"),align:"center",width:"110"},{default:a(r=>[e(S,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:a(()=>[e(D,null,{default:a(()=>[e(y,{class:"flex justify-between"},{default:a(()=>[e(I,{to:`/settings/permission/${r.row.id}/edit`,class:"flex justify-between"},{default:a(()=>[e(p(u),{icon:"mingcute:edit-line",class:"me-2"}),c(" "+l(t.$t("common.edit")),1)]),_:2},1032,["to"])]),_:2},1024),r.row.id!=1?(b(),E(y,{key:0,class:"flex justify-between",onClick:W(ge=>V(r.row.id),["prevent"])},{default:a(()=>[e(p(u),{icon:"mingcute:delete-2-line",class:"me-2"}),c(" "+l(t.$t("common.delete")),1)]),_:2},1032,["onClick"])):O("",!0)]),_:2},1024)]),default:a(()=>[e(w,{type:"primary"},{default:a(()=>[c(l(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[q,m.value]]),n("div",pe,[n("div",ue,[n("span",null,l(t.$t("common.table_paginate",{from:s.from,to:s.to,total:s.total})),1)]),n("div",_e,[e(z,{class:"float-end",background:"",layout:"prev, pager, next","page-size":s.pageSize,total:s.total,"current-page":s.page,onCurrentChange:d},null,8,["page-size","total","current-page"])])])]),_:1})])}}};export{De as default};
