import{q as U,r as F,c as H,a as l,V as e,X as s,T as o,al as K,o as v,aa as r,u as a,_ as O,S as k,P as Q,W}from"./@vue-R74GAGRy.js";import{a as V}from"./axios-D8rVyQy1.js";import{I as g}from"./@iconify-B_FrOzP8.js";import{_ as X}from"./lodash-BJPsjdUP.js";import{u as A}from"./vue-i18n-ZNZ64Gzf.js";import{_ as G}from"./SkeletonTable-BlkTH-8E.js";import{u as J}from"./@tanstack-CrM5e4XN.js";import{u as R}from"./app-CP7P-XXU.js";import{i as Y,f as Z,j as ee,s as te,t as oe,o as ae,k as ne,u as se,q as le,r as re,a as ie,b as me,c as ce,v as de,y as pe,z as ue,p as w}from"./element-plus-m-0apcFn.js";import"./@intlify-ChVUvfmF.js";import"./pinia-AHalXmfd.js";import"./vue-router-LsEmCaCE.js";import"./js-cookie-Cz0CWeBA.js";import"./@casl-B-uYYHKL.js";import"./@ucast-BiZkLRnB.js";import"./@vueuse-B1uMN4GC.js";import"./chart.js-B8s4pPcf.js";import"./vue-advanced-cropper-Cc488Mck.js";import"./dayjs-9DF7GWnL.js";import"./vue3-blocks-tree-BH4O2Ayn.js";import"./vue-BaDTWQb3.js";import"./@unhead-Br2qtGVU.js";import"./unhead-DeLy1NBI.js";import"./hookable-B8xFkYCm.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-BklxBE5D.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";const _e={class:"content"},fe={class:"content-header"},ge={class:"content-title"},be={class:"md:flex hidden items-center gap-2.5 text-sm font-semibold"},he={class:"flex justify-between items-center p-4"},ve={class:"flex items-center gap-2"},we={class:"flex justify-between items-center p-4"},ye={class:"flex items-center gap-2"},$e={class:"flex items-center gap-2"},at={__name:"Index",setup(Ee){const{t:i}=A(),{setTitle:B}=R();U(()=>{B(i("base.user",2))});const m=F({page:1,limit:25,q:""}),y=async({queryKey:t})=>{const[c,p]=t,f=await V.get("/settings/user",{params:p});return m.value.page=f.data.page,f.data},{data:d,isLoading:_,isError:ke,error:Ve,refetch:b}=J({queryKey:["userList",m.value],queryFn:y,keepPreviousData:!0}),C=X.debounce(()=>{m.value.page=1,b()},2e3),I=t=>{m.value.page=t,b()},q=t=>{ue.confirm(i("message.delete_confirm"),i("message.delete_confirm_title"),{confirmButtonText:i("common.ok"),cancelButtonText:i("common.cancel"),type:"warning"}).then(()=>{V.delete(`/settings/user/${t}/delete`).then(()=>{y(),w({type:"success",message:i("message.delete_success")})}).catch(c=>{w({type:"error",message:i("message.delete_cancel")})})}).catch(()=>{w({type:"info",message:i("message.delete_cancel")})})};return(t,c)=>{const p=ee,f=Y,h=oe,D=te,T=ae,$=ne,u=re,j=K("router-link"),E=ce,x=me,M=ie,P=le,S=pe,N=se,z=Z,L=de;return v(),H("div",_e,[l("div",fe,[l("h2",ge,s(t.$t("base.user",2)),1),l("div",be,[e(f,{separator:"/"},{default:o(()=>[e(p,{to:{path:"/"}},{default:o(()=>[r(s(t.$t("base.dashboard")),1)]),_:1}),e(p,{to:{path:"/settings"}},{default:o(()=>[r(s(t.$t("base.setting",2)),1)]),_:1}),e(p,null,{default:o(()=>[r(s(t.$t("base.user",2)),1)]),_:1})]),_:1})])]),e(z,{"body-class":"!p-0",class:"!rounded-lg !shadow-md"},{default:o(()=>[l("div",he,[e(D,{modelValue:m.value.limit,"onUpdate:modelValue":c[0]||(c[0]=n=>m.value.limit=n),placeholder:t.$t("common.select"),disabled:a(_),class:"w-20",onChange:c[1]||(c[1]=n=>a(b)())},{default:o(()=>[e(h,{label:"25",value:"25"}),e(h,{label:"50",value:"50"}),e(h,{label:"100",value:"100"})]),_:1},8,["modelValue","placeholder","disabled"]),l("div",ve,[e(T,{modelValue:m.value.q,"onUpdate:modelValue":c[2]||(c[2]=n=>m.value.q=n),onInput:a(C),clearable:"",disabled:a(_)},{prefix:o(()=>[e(a(g),{icon:"mingcute:search-line"})]),_:1},8,["modelValue","onInput","disabled"]),e($,{tag:"router-link",type:"primary",to:"/settings/user/create",disabled:a(_)},{default:o(()=>[e(a(g),{icon:"mingcute:add-line",class:"me-2"}),r(" "+s(t.$t("common.create")),1)]),_:1},8,["disabled"])])]),e(N,{loading:a(_),animated:""},{template:o(()=>[e(G)]),default:o(()=>[O((v(),k(P,{class:"min-w-full",data:a(d).data},{default:o(()=>[e(u,{prop:"name",label:t.$t("common.name")},null,8,["label"]),e(u,{prop:"email",label:t.$t("common.email")},null,8,["label"]),e(u,{prop:"phone",label:t.$t("common.phone")},{default:o(n=>[r(s(n.row.phone??"-"),1)]),_:1},8,["label"]),e(u,{label:t.$t("base.role")},{default:o(n=>[r(s(n.row.roles.length?n.row.roles[0].name:"-"),1)]),_:1},8,["label"]),e(u,{label:t.$t("common.action"),align:"center",width:"110"},{default:o(n=>[e(M,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:o(()=>[e(x,null,{default:o(()=>[e(E,{class:"flex justify-between"},{default:o(()=>[e(j,{to:`/settings/user/${n.row.id}/edit`,class:"flex justify-between"},{default:o(()=>[e(a(g),{icon:"mingcute:edit-line",class:"me-2"}),r(" "+s(t.$t("common.edit")),1)]),_:2},1032,["to"])]),_:2},1024),n.row.id!=1?(v(),k(E,{key:0,class:"flex justify-between",onClick:W(Be=>q(n.row.id),["prevent"])},{default:o(()=>[e(a(g),{icon:"mingcute:delete-2-line",class:"me-2"}),r(" "+s(t.$t("common.delete")),1)]),_:2},1032,["onClick"])):Q("",!0)]),_:2},1024)]),default:o(()=>[e($,{type:"primary"},{default:o(()=>[r(s(t.$t("common.action")),1)]),_:1})]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[L,t.loading]]),l("div",we,[l("div",ye,[l("span",null,s(t.$t("common.table_paginate",{from:a(d).from,to:a(d).to,total:a(d).total})),1)]),l("div",$e,[e(S,{class:"float-end",background:"",layout:"prev, pager, next","page-size":a(d).per_page,total:a(d).total,"current-page":a(d).current_page,onCurrentChange:I},null,8,["page-size","total","current-page"])])])]),_:1},8,["loading"])]),_:1})])}}};export{at as default};
