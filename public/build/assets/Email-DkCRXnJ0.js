import{r as d,q as C,P as D,M as L,O as t,o as M,W as a,$ as T,a as v,T as p,U as I}from"./@vue-BedgDXZT.js";import{u as N}from"./vue-i18n-3uPOuKlG.js";import{u as R}from"./app-DQL-JUcq.js";import{v as F,f as h,m as q,g as G,h as H,n as O,o as P,C as W,D as j,k as z,p as c}from"./element-plus-B3W2dA5h.js";import"./@intlify-ChVUvfmF.js";import"./axios-D8rVyQy1.js";import"./pinia-BVe78Fnf.js";import"./vue-router-CFFWa3Rv.js";import"./js-cookie-Cz0CWeBA.js";import"./@iconify-BzSLy_Lz.js";import"./@casl-Dl6lt6vV.js";import"./@ucast-BiZkLRnB.js";import"./@vueuse-_BfsD77n.js";import"./chart.js-B8s4pPcf.js";import"./vue-advanced-cropper-C5NvVQmq.js";import"./dayjs-BmnIqbSg.js";import"./@tanstack-D5MgbqGz.js";import"./vue3-blocks-tree-BkKvaGx5.js";import"./vue-BcxTvRm9.js";import"./@unhead-BU3UxbPv.js";import"./unhead-M3i9Ttrl.js";import"./hookable-B8xFkYCm.js";import"./@popperjs-D_chPuIy.js";import"./@element-plus-DHhqOHwO.js";import"./lodash-es-D7WVGOfI.js";import"./async-validator-9PlIezaS.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";const A={class:"text-right"},Ee={__name:"Email",props:{title:{type:String,default:""}},emits:["childinit"],setup(J,{emit:V}){const{t:u}=N(),{setTitle:g}=R(),b=V,l=d({mail_host:null,mail_port:null,mail_username:null,mail_password:null,mail_encryption:"SSL",mail_from_address:null,mail_from_name:null}),m=d({}),n=d(!1),y=async()=>{try{m.value={},n.value=!0;const o=await axios.get("/settings/email");o.status===200&&(l.value.mail_host=o.data.mail_host,l.value.mail_port=o.data.mail_port,l.value.mail_username=o.data.mail_username,l.value.mail_password=o.data.mail_password,l.value.mail_encryption=o.data.mail_encryption,l.value.mail_from_name=o.data.mail_from_name)}catch(o){console.error(o)}finally{n.value=!1}},w=async()=>{n.value=!0;const o="/settings/email/update";try{const e=await axios.post(o,l.value);console.log(e.data.result),c({message:u("success_msg"),type:"success"})}catch(e){m.value=e.validation,c({message:u("error_msg"),type:"error"})}finally{n.value=!1}};return C(()=>{b("childinit","email_setting"),g(u("base.email_setting",2)),y()}),(o,e)=>{const i=P,s=O,_=j,E=W,f=H,S=G,$=z,U=q,k=h,B=F;return D((M(),L(k,{class:"shadow-sm sm:rounded-lg"},{default:t(()=>[a(U,{model:l.value,onSubmit:T(w,["prevent"]),"label-position":"top"},{default:t(()=>[a(S,{gutter:20},{default:t(()=>[a(f,{md:12},{default:t(()=>[a(s,{label:o.$t("host"),error:m.value.mail_host},{default:t(()=>[a(i,{modelValue:l.value.mail_host,"onUpdate:modelValue":e[0]||(e[0]=r=>l.value.mail_host=r)},null,8,["modelValue"])]),_:1},8,["label","error"]),a(s,{label:o.$t("username"),error:m.value.mail_username},{default:t(()=>[a(i,{modelValue:l.value.mail_username,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value.mail_username=r)},null,8,["modelValue"])]),_:1},8,["label","error"]),a(s,{label:o.$t("name"),error:m.value.mail_from_name},{default:t(()=>[a(i,{modelValue:l.value.mail_from_name,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value.mail_from_name=r)},null,8,["modelValue"])]),_:1},8,["label","error"]),a(s,{label:o.$t("encrypt"),error:m.value.mail_encryption},{default:t(()=>[a(E,{modelValue:l.value.mail_encryption,"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.mail_encryption=r),class:"ml-4"},{default:t(()=>[a(_,{value:"ssl"},{default:t(()=>e[7]||(e[7]=[p("SSL")])),_:1}),a(_,{value:"lts"},{default:t(()=>e[8]||(e[8]=[p("LTS")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","error"])]),_:1}),a(f,{md:12},{default:t(()=>[a(s,{label:o.$t("port"),error:m.value.mail_port},{default:t(()=>[a(i,{modelValue:l.value.mail_port,"onUpdate:modelValue":e[4]||(e[4]=r=>l.value.mail_port=r)},null,8,["modelValue"])]),_:1},8,["label","error"]),a(s,{label:o.$t("password"),error:m.value.mail_password},{default:t(()=>[a(i,{modelValue:l.value.mail_password,"onUpdate:modelValue":e[5]||(e[5]=r=>l.value.mail_password=r)},null,8,["modelValue"])]),_:1},8,["label","error"]),a(s,{label:o.$t("email"),error:m.value.mail_from_address},{default:t(()=>[a(i,{modelValue:l.value.mail_from_address,"onUpdate:modelValue":e[6]||(e[6]=r=>l.value.mail_from_address=r)},null,8,["modelValue"])]),_:1},8,["label","error"])]),_:1})]),_:1}),v("div",A,[a($,{"native-type":"submit",type:"primary"},{default:t(()=>[e[9]||(e[9]=v("i",{class:"mgc_check_fill me-2"},null,-1)),p(" "+I(o.$t("save")),1)]),_:1})])]),_:1},8,["model"])]),_:1})),[[B,n.value]])}}};export{Ee as default};
